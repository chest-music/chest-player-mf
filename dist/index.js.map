{"version":3,"file":"index.js","sources":["../src/hooks/useMediaQuery.js","../src/hooks/useModal.js","../src/utils/helpers.js","../src/components/ProgressBar.js","../src/components/ProgressBarMobile.js","../src/assets/images/icon-repeat.svg","../src/assets/images/icon-next.svg","../src/assets/images/icon-previous.svg","../src/assets/images/icon-shuffle.svg","../src/assets/images/icon-play.svg","../src/assets/images/icon-pause.svg","../src/components/Controls.js","../src/components/ControlsMobile.js","../src/components/VolumeControls.js","../src/app/playlist.js","../src/components/Track.js","../src/components/TrackMobile.js","../src/components/Player.js","../src/components/share/SharedLinkBanner.js","../src/utils/capitalize.js","../src/utils/trackTransforms.js","../src/hooks/useSEOMetadata.js","../src/components/share/SharedLinkPage.js","../src/components/PlayerWithShare.js","../src/utils/seoHelpers.js","../src/components/PlayerProvider.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nconst useMediaQuery = (query) => {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    const media = window.matchMedia(query);\n    if (media.matches !== matches) {\n      setMatches(media.matches);\n    }\n    const listener = () => setMatches(media.matches);\n    window.addEventListener(\"resize\", listener);\n    return () => window.removeEventListener(\"resize\", listener);\n  }, [matches, query]);\n\n  return matches;\n}\n\nexport default useMediaQuery;","import { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\n// Get modal dependencies from parent app\nconst getModalDependencies = () => {\n  if (typeof window !== 'undefined' && window.__CHEST_PLAYER_DEPS__?.modalActions) {\n    return window.__CHEST_PLAYER_DEPS__.modalActions;\n  }\n  // Return no-op functions if not provided\n  return {\n    openModal: () => {},\n    closeModal: () => {},\n    isModalOpen: () => false\n  };\n};\n\nexport function useModal(modalFileName) {\n  const dispatch = useDispatch();\n  const { openModal, closeModal, isModalOpen } = getModalDependencies();\n\n  const onOpen = useCallback(meta => dispatch(openModal(modalFileName, meta)), [\n    dispatch, openModal, modalFileName\n  ]);\n\n  const onClose = useCallback(() => dispatch(closeModal(modalFileName)), [\n    dispatch, closeModal, modalFileName\n  ]);\n\n  const isOpen = useSelector(state => isModalOpen(state, modalFileName));\n\n  return {\n    isOpen,\n    onOpen,\n    onClose,\n  }\n}","// Helper functions extracted from main app\n\nfunction classNames(classes) {\n  const toBeClasses = Object.keys(classes).map((key) =>\n    classes[key] === true ? key : '',\n  );\n  return toBeClasses.join(' ');\n}\n\nconst format = {\n  time: (seconds) => {\n    if (!seconds) return '0:00';\n    if (typeof seconds === 'string') seconds = parseInt(seconds);\n\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = Math.floor(seconds % 60);\n    const formattedSeconds = remainingSeconds < 10 ? `0${remainingSeconds}` : remainingSeconds;\n\n    return `${minutes}:${formattedSeconds}`;\n  }\n}\n\nexport {\n  classNames,\n  format\n}","import * as React from 'react';\nimport { format } from '../utils/helpers';\n\nexport default function ProgressBar({ timeProgress, duration, progressBarRef, audioRef, open, playlist }) {\n  const isSharedLink = !!playlist[0]?.token;\n\n  const handleProgressChange = () => {\n    if (isSharedLink) return; // No permitir cambios si es un link compartido\n    if (!audioRef.current || !progressBarRef.current) return;\n    audioRef.current.currentTime = progressBarRef.current.value;\n  }\n\n  return (\n    <>\n      <div className='w-full flex items-center gap-1.5 player-progressbar'>\n        <div className='text-sm'>{format.time(timeProgress)}</div>\n        <input\n          type='range'\n          defaultValue={0}\n          step={0.05}\n          className={`bg-neutral-black rounded-lg h-1.5 appearance-none ${isSharedLink ? 'pointer-events-none' : ''}`}\n          ref={progressBarRef}\n          onChange={handleProgressChange}\n        />\n        <div className='text-sm'>{format.time(duration)}</div>\n      </div>\n    </>\n  )\n}\n","import * as React from 'react';\nimport { classNames, format } from '../utils/helpers';\n\nexport default function ProgressBar({ timeProgress, duration, progressBarRef, audioRef, open, playlist }) {\n  const isSharedLink = !!playlist[0]?.token;\n\n  const handleProgressChange = () => {\n    if (isSharedLink) return; // No permitir cambios si es un link compartido\n    if (!audioRef.current || !progressBarRef.current) return;\n    audioRef.current.currentTime = progressBarRef.current.value;\n  }\n\n  return (\n    <>\n      <div className={classNames({\n        'w-full flex items-center player-progressbar': true,\n        'flex-col gap-2': open,\n        'gap-1.5': !open\n      })}>\n        <input\n          type='range'\n          defaultValue={0}\n          step={0.05}\n          className={classNames({\n            'bg-neutral-black rounded-lg appearance-none': true,\n            'h-1.5': open,\n            'h-[3px]': !open,\n            'pointer-events-none': isSharedLink\n          })}\n          ref={progressBarRef}\n          onChange={handleProgressChange}\n        />\n        {open && (\n          <div className='grid grid-cols-2 w-full'>\n            <div className='text-sm'>{format.time(timeProgress)}</div>\n            <div className='text-sm text-right text-neutral-silver-200'>{format.time(duration)}</div>\n          </div>\n        )}\n      </div>\n    </>\n  )\n}","import React from \"react\";\nexport default ({\n  styles = {},\n  ...props\n}) => <svg width=\"20\" height=\"20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M1.668 10.001a5.776 5.776 0 011.634-4.028 5.513 5.513 0 013.936-1.672h7.255l-.257-.262a.902.902 0 01-.258-.637.92.92 0 01.258-.638.88.88 0 01.623-.264.863.863 0 01.623.264l1.759 1.8a.901.901 0 01.258.637.918.918 0 01-.258.638l-1.76 1.8a.876.876 0 01-1.245 0A.901.901 0 0113.977 7a.918.918 0 01.26-.637l.256-.263H7.238c-1.011 0-1.98.411-2.695 1.143A3.947 3.947 0 003.427 10a.91.91 0 01-.258.637.87.87 0 01-1.243 0A.91.91 0 011.668 10zm14.95-.9a.87.87 0 00-.622.264.91.91 0 00-.258.636 3.98 3.98 0 01-.29 1.493 3.907 3.907 0 01-.826 1.265c-.354.362-.774.65-1.236.845a3.735 3.735 0 01-1.458.297H4.673l.256-.262a.912.912 0 000-1.275.87.87 0 00-1.246 0l-1.758 1.8a.902.902 0 00-.259.637.918.918 0 00.259.637l1.758 1.8a.877.877 0 001.246 0 .901.901 0 00.259-.637.918.918 0 00-.259-.638l-.256-.262h7.255a5.513 5.513 0 003.936-1.672 5.776 5.776 0 001.633-4.028.91.91 0 00-.257-.636.87.87 0 00-.622-.264z\" fill=\"#C4C9CF\" /></svg>;","import React from \"react\";\nexport default ({\n  styles = {},\n  ...props\n}) => <svg width=\"24\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M6.107 18.224l7.693-5.18a1.24 1.24 0 000-2.075L6.107 5.776C5.213 5.191 4 5.79 4 6.82v10.36c0 1.03 1.213 1.63 2.107 1.044zM17.333 6.273v11.454c0 .7.6 1.273 1.334 1.273C19.4 19 20 18.427 20 17.727V6.273C20 5.573 19.4 5 18.667 5c-.734 0-1.334.573-1.334 1.273z\" fill=\"#C4C9CF\" /></svg>;","import React from \"react\";\nexport default ({\n  styles = {},\n  ...props\n}) => <svg width=\"24\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M17.893 18.224l-7.693-5.18a1.24 1.24 0 010-2.075l7.693-5.193C18.787 5.191 20 5.79 20 6.82v10.36c0 1.03-1.213 1.63-2.107 1.044zM6.667 6.273v11.454c0 .7-.6 1.273-1.334 1.273C4.6 19 4 18.427 4 17.727V6.273C4 5.573 4.6 5 5.333 5c.734 0 1.334.573 1.334 1.273z\" fill=\"#C4C9CF\" /></svg>;","import React from \"react\";\nexport default ({\n  styles = {},\n  ...props\n}) => <svg width=\"20\" height=\"20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M18.79 13.71a.937.937 0 010 1.329l-1.876 1.875a.945.945 0 01-1.532-.305.938.938 0 01.204-1.023l.273-.274h-2.414a1.571 1.571 0 01-1.273-.656L6.39 6.562H2.5a.938.938 0 110-1.875h4.055a1.57 1.57 0 011.273.656l5.781 8.094h2.25l-.273-.273a.94.94 0 011.328-1.328l1.875 1.875zM8.624 11.922a.938.938 0 00-1.305.22l-.93 1.296H2.5a.937.937 0 100 1.875h4.055a1.571 1.571 0 001.273-.656l1.016-1.422a.945.945 0 00-.219-1.313zm2.75-3.843a.937.937 0 001.305-.219l.93-1.297h2.25l-.274.274a.937.937 0 00.664 1.6.946.946 0 00.664-.272l1.875-1.875a.937.937 0 000-1.328l-1.875-1.875a.94.94 0 00-1.328 1.328l.273.273h-2.414a1.57 1.57 0 00-1.273.656l-1.016 1.422a.945.945 0 00.219 1.313z\" fill=\"#C4C9CF\" /></svg>;","import React from \"react\";\nexport default ({\n  styles = {},\n  ...props\n}) => <svg width=\"40\" height=\"40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M8.333 31.394V8.606a1.667 1.667 0 012.449-1.472L32.23 18.528c1.18.627 1.18 2.317 0 2.944L10.782 32.866a1.667 1.667 0 01-2.449-1.472z\" fill=\"#fff\" /></svg>;","import React from \"react\";\nexport default ({\n  styles = {},\n  ...props\n}) => <svg width=\"40\" height=\"40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M10 10c0-.92.746-1.666 1.667-1.666H15c.92 0 1.667.746 1.667 1.667v20c0 .92-.747 1.666-1.667 1.666h-3.333c-.92 0-1.667-.746-1.667-1.666V10zm13.333 0c0-.92.747-1.666 1.667-1.666h3.333c.92 0 1.667.746 1.667 1.667v20c0 .92-.746 1.666-1.667 1.666H25c-.92 0-1.667-.746-1.667-1.666V10z\" fill=\"#fff\" /></svg>;","/* shuffle button disabled */\n\nimport * as React from 'react';\nconst { useRef, useCallback, useEffect } = React;\n\nimport RepeatIcon from '../assets/images/icon-repeat.svg';\nimport NextIcon from '../assets/images/icon-next.svg';\nimport PreviousIcon from '../assets/images/icon-previous.svg';\nimport ShuffleIcon from '../assets/images/icon-shuffle.svg';\nimport PlayIcon from '../assets/images/icon-play.svg';\nimport PauseIcon from '../assets/images/icon-pause.svg';\n\n// Get playlist actions from injected dependencies\nconst getPlaylistActions = () => {\n  if (typeof window !== 'undefined' && window.__CHEST_PLAYER_DEPS__?.playlistActions) {\n    return window.__CHEST_PLAYER_DEPS__.playlistActions;\n  }\n  return {\n    play: () => console.log('Play action not injected'),\n    next: () => console.log('Next action not injected'),\n    previous: () => console.log('Previous action not injected'),\n    playing: () => console.log('Playing action not injected'),\n    toggleShuffle: () => console.log('ToggleShuffle action not injected')\n  };\n};\n\n// Get playlist state from injected dependencies\nconst getPlaylistState = () => {\n  if (typeof window !== 'undefined' && window.__CHEST_PLAYER_DEPS__?.reduxProps?.playlistState) {\n    return window.__CHEST_PLAYER_DEPS__.reduxProps.playlistState;\n  }\n  return {\n    shuffle: false,\n    context: 'my-chest'\n  };\n};\n\nexport default function Controls({\n  audioRef,\n  progressBarRef,\n  duration,\n  setTimeProgress,\n  setLoop,\n  loop,\n  dispatch,\n  playlist,\n  mobileExpanded = false\n}) {\n  const playAnimationRef = useRef();\n  const { play, next, previous, playing, toggleShuffle } = getPlaylistActions();\n  const playlistState = getPlaylistState();\n\n  const repeat = useCallback(() => {\n    if (audioRef.current && progressBarRef.current) {\n      const currentTime = audioRef.current.currentTime;\n      const duration = audioRef.current.duration;\n  \n      setTimeProgress(currentTime);\n  \n      progressBarRef.current.value = currentTime;\n      \n      progressBarRef.current.style.setProperty(\n        '--range-progress',\n        `${(progressBarRef.current.value / duration) * 100}%`\n      );\n        \n      playAnimationRef.current = requestAnimationFrame(repeat);\n    }\n  }, [audioRef, duration, progressBarRef, setTimeProgress]);\n\n  const togglePlayPause = () => {\n    play()\n  }\n  \n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      // Solo manejar la barra espaciadora si no estamos en un input o textarea\n      if (event.keyCode === 32 && \n          event.target.tagName !== 'INPUT' && \n          event.target.tagName !== 'TEXTAREA') {\n        event.preventDefault();\n        play();\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [play]);\n\n  const toggleLoop = () => {\n    setLoop(prev => !prev);\n  }\n\n  const skipForward = () => {\n    next();\n  }\n\n  const skipBackward = () => {\n    previous();\n  }\n\n  const handleToggleShuffle = () => {\n    toggleShuffle();\n  }\n\n  const handleTrackEnd = () => {\n    if (playlist[0]?.token) {\n     \n      return;\n    }\n\n    if (playlist.length > 1) {\n      // Si hay más temas, pasamos al siguiente\n      next();\n    } else {\n      // Si no hay más temas:\n      // 1. Reiniciamos el tiempo a 0\n      if (audioRef.current) {\n        audioRef.current.currentTime = 0;\n      }\n      // 2. Actualizamos el estado para mostrar el ícono de play\n      const currentTrack = playlist[0];\n      playing({\n        ...currentTrack,\n        isPlaying: false\n      });\n    }\n  }\n\n  useEffect(() => {\n    if (audioRef.current) {\n      audioRef.current.addEventListener('ended', handleTrackEnd);\n    }\n\n    return () => {\n      if (audioRef.current) {\n        audioRef.current.removeEventListener('ended', handleTrackEnd);\n      }\n    };\n  }, [audioRef.current, playlist]);\n\n  useEffect(() => {\n    if (playlist[0]?.isPlaying) {\n      let playPromise = audioRef.current.play();\n\n      if (playPromise !== undefined) {\n        playPromise\n          .catch(() => {\n            audioRef.current.pause();\n          })\n      }\n    } else {\n      audioRef.current.pause();\n    }\n\n    if (loop) {\n      audioRef.current.loop = true;\n    } else {\n      audioRef.current.loop = false;\n    }\n\n    playAnimationRef.current = requestAnimationFrame(repeat);\n\n  }, [loop, audioRef, repeat, playlist]);\n\n  if (mobileExpanded) {\n    return (\n      <div className='w-full px-4 flex items-center justify-between'>\n        {/* Shuffle (Left) */}\n        <button \n          type='button' \n          className={`${playlistState.shuffle ? 'player-controls-active' : 'player-controls'}`}\n          onClick={handleToggleShuffle}\n        >\n          <ShuffleIcon width={20} height={20} />\n        </button>\n        \n        {/* Center controls (Previous, Play/Pause, Next) */}\n        <div className='flex items-center gap-6'>\n          <button type='button' onClick={skipBackward} className='text-neutral-silver-200 hover:text-white'>\n            <PreviousIcon width={24} height={24} />\n          </button>\n          \n          <button type='button' onClick={togglePlayPause} className='text-white hover:scale-105 transition-transform'>\n            {playlist[0]?.isPlaying ?\n              <PauseIcon width={34} height={34} /> :\n              <PlayIcon width={34} height={34} />\n            }\n          </button>\n          \n          <button type='button' onClick={skipForward} className='text-neutral-silver-200 hover:text-white'>\n            <NextIcon width={24} height={24} />\n          </button>\n        </div>\n        \n        {/* Repeat (Right) */}\n        <button\n          type='button'\n          className={`${loop ? 'player-controls-active' : 'player-controls'}`}\n          onClick={toggleLoop}>\n          <RepeatIcon width={20} height={20} />\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className='flex items-center'>\n        <button \n          type='button' \n          className={`p-2 mr-2 ${playlistState.shuffle ? 'player-controls-active' : 'player-controls'}`}\n          onClick={handleToggleShuffle}\n        >\n          <ShuffleIcon />\n        </button>\n        <button type='button' onClick={skipBackward} className='p-2 player-controls'>\n          <PreviousIcon />\n        </button>\n        <button type='button' onClick={togglePlayPause} className='player-controls'>\n          {playlist[0]?.isPlaying ?\n            <PauseIcon width={40} height={40} /> :\n            <PlayIcon width={40} height={40} />\n          }\n        </button>\n        <button type='button' onClick={skipForward} className='p-2 player-controls'>\n          <NextIcon />\n        </button>\n        <button\n          type='button'\n          className={`p-2 ml-2 ${loop ? 'player-controls-active' : 'player-controls'}`}\n          onClick={toggleLoop}>\n          <RepeatIcon />\n        </button>\n      </div>\n    </>\n  )\n}","/* shuffle button disabled */\n\nimport * as React from 'react';\nconst { useRef, useState, useCallback, useEffect } = React;\n\nimport RepeatIcon from '../assets/images/icon-repeat.svg';\nimport NextIcon from '../assets/images/icon-next.svg';\nimport PreviousIcon from '../assets/images/icon-previous.svg';\nimport ShuffleIcon from '../assets/images/icon-shuffle.svg';\nimport PlayIcon from '../assets/images/icon-play.svg';\nimport PauseIcon from '../assets/images/icon-pause.svg';\n\n// Get playlist actions from injected dependencies\nconst getPlaylistActions = () => {\n  if (typeof window !== 'undefined' && window.__CHEST_PLAYER_DEPS__?.playlistActions) {\n    return window.__CHEST_PLAYER_DEPS__.playlistActions;\n  }\n  return {\n    play: () => {},\n    playing: () => {}\n  };\n};\n\nexport default function ControlsMobile({\n  audioRef,\n  progressBarRef,\n  duration,\n  setTimeProgress,\n  setLoop,\n  loop,\n  dispatch,\n  playlist\n}) {\n  const playAnimationRef = useRef();\n  const { play, playing } = getPlaylistActions();\n\n  const repeat = useCallback(() => {\n    if (!audioRef.current || !progressBarRef.current) return;\n\n    try {\n      const currentTime = audioRef.current.currentTime;\n      const duration = audioRef.current.duration;\n  \n      setTimeProgress(currentTime);\n  \n      // Additional null check before accessing progressBarRef.current.value\n      if (progressBarRef.current) {\n        progressBarRef.current.value = currentTime;\n        \n        progressBarRef.current.style.setProperty(\n          '--range-progress',\n          `${(progressBarRef.current.value / duration) * 100}%`\n        );\n      }\n  \n      playAnimationRef.current = requestAnimationFrame(repeat);\n    } catch (error) {\n      // Error in repeat - silently handle\n      cancelAnimationFrame(playAnimationRef.current);\n    }\n  }, [audioRef, progressBarRef, setTimeProgress]);\n\n  const togglePlayPause = (e) => {\n    e.stopPropagation();\n    play();\n  }\n\n  const toggleLoop = () => {\n    setLoop(prev => !prev);\n  }\n\n  const skipForward = () => {\n    audioRef.current.currentTime += 15\n  }\n\n  const skipBackward = () => {\n    audioRef.current.currentTime -= 15;\n  }\n\n  useEffect(() => {\n    if (!audioRef.current?.src) return;\n    \n    playAnimationRef.current = requestAnimationFrame(repeat);\n\n    return () => {\n      if (playAnimationRef.current) {\n        cancelAnimationFrame(playAnimationRef.current);\n      }\n    };\n  }, [repeat, audioRef.current?.src]);\n\n  // Handle playlist play state changes for mobile autoplay\n  useEffect(() => {\n    if (playlist[0]?.isPlaying && audioRef.current) {\n      let playPromise = audioRef.current.play();\n\n      if (playPromise !== undefined) {\n        playPromise\n          .catch(() => {\n            // Mobile autoplay blocked - user gesture required\n            audioRef.current.pause();\n          });\n      }\n    } else if (!playlist[0]?.isPlaying && audioRef.current) {\n      audioRef.current.pause();\n    }\n\n    playAnimationRef.current = requestAnimationFrame(repeat);\n  }, [playlist[0]?.isPlaying, audioRef, repeat]);\n\n  return (\n    <>\n      <div className='flex items-center'>\n        {/* <button type='button' className='p-2 mr-2 disabled:opacity-30' disabled>\n          <ShuffleIcon />\n        </button>\n        <button type='button' onClick={skipBackward} className='p-2 player-controls'>\n          <PreviousIcon />\n        </button> */}\n        <button type='button' onClick={togglePlayPause} className='player-controls'>\n          {playlist[0]?.isPlaying ?\n            <PauseIcon width={40} height={40} /> :\n            <PlayIcon width={40} height={40} />\n          }\n        </button>\n        {/* <button type='button' onClick={skipForward} className='p-2 player-controls'>\n          <NextIcon />\n        </button>\n        <button \n          type='button' \n          className={`p-2 ml-2 ${loop ? 'player-controls-active' : 'player-controls'}`} \n          onClick={toggleLoop}>\n          <RepeatIcon />\n        </button> */}\n      </div>\n    </>\n  )\n}","import * as React from 'react';\nconst { useEffect, useRef, useState } = React;\nimport { \n  SpeakerWaveIcon, \n  SpeakerXMarkIcon, \n  ChevronDownIcon,\n  ClockIcon } from '@heroicons/react/24/outline';\n// Get playlist actions from injected dependencies\nconst getPlaylistActions = () => {\n  if (typeof window !== 'undefined' && window.__CHEST_PLAYER_DEPS__?.playlistActions) {\n    return window.__CHEST_PLAYER_DEPS__.playlistActions;\n  }\n  return {\n    reset: () => console.log('Reset action not injected')\n  };\n};\n\nexport default function VolumeControls({ audioRef, dispatch }) {\n  const [volume, setVolume] = useState(50);\n  const [prevVolume, setPrevVolume] = useState(0);\n  const { reset } = getPlaylistActions();\n  \n  const volumeRef = useRef();\n\n  const toggleMuted = () => {\n    if (volume > 0) {\n      setPrevVolume(volume);\n      setVolume(0);\n    } else {\n      setVolume(prevVolume);\n    }\n  }\n\n  const handleClose = () => {\n    reset()\n  }\n\n  useEffect(() => {\n    volumeRef.current.style.setProperty(\n      '--range-progress',\n      `${volumeRef.current.value}%`\n    );\n\n    if (audioRef) {\n      audioRef.current.volume = volume / 100;\n    }\n  }, [volume, audioRef]);\n\n  return (\n    <>\n      <div className='flex items-center justify-end player-volume'>\n        <button type='button' className='p-2 disabled:opacity-30' disabled>\n          <ClockIcon className='h-6 w-6 text-neutral-silver-200' />\n        </button>\n        <button type='button' className='p-2' onClick={toggleMuted}>\n          {volume === 0 ?\n            <SpeakerXMarkIcon className='h-6 w-6 text-neutral-silver-200' /> :\n            <SpeakerWaveIcon className='h-6 w-6 text-neutral-silver-200' />\n          }\n        </button>\n        <input\n          ref={volumeRef}\n          type='range'\n          value={volume}\n          min={0}\n          max={100}\n          className='bg-neutral-black rounded-lg h-1.5 appearance-none mr-4'\n          onChange={(e) => { setVolume(parseInt(e.target.value)) }} />\n        <button type='button' className='p-2 test' onClick={handleClose}>\n          <ChevronDownIcon className='h-6 w-6 text-white' />\n        </button>\n      </div>\n    </>\n  )\n}","// Playlist actions - these will be provided via dependency injection\n// This file contains dummy exports to satisfy imports during build\n\nexport const reset = () => {};\nexport const playing = () => {};","import * as React from 'react';\nconst { useEffect, useCallback } = React;\nimport { playing as playingAction } from '../app/playlist';\n\nexport default function Track({\n  currentTrack,\n  audioRef,\n  setDuration,\n  progressBarRef,\n  dispatch,\n  playlist\n}) {\n  const isSharedLink = !!playlist[0]?.token;\n\n  const handleTogglePlay = useCallback(() => {\n    if (!currentTrack) return;\n\n    dispatch(playingAction({\n      ...currentTrack,\n      isPlaying: !currentTrack.isPlaying\n    }));\n  }, [currentTrack, dispatch]);\n\n  const onLoadedMetadata = () => {\n    const seconds = audioRef.current.duration;\n\n    setDuration(seconds);\n    if (progressBarRef.current) {\n      progressBarRef.current.max = seconds;\n    }\n  }\n\n  return (\n    <div className='flex items-center'>\n      <div className='flex gap-4 items-center'>\n        <div \n          className='w-[52px] h-[52px] bg-cover rounded cursor-pointer' \n          style={{ backgroundImage: `url(${currentTrack.cover_url || 'https://cdn.chestmusic.com/cover-default.jpg'})` }}\n          onClick={handleTogglePlay}\n        />\n        <div className='flex flex-col gap-0.5'>\n          <div className='flex flex-col grow'>\n            <div className='w-full whitespace-nowrap overflow-hidden relative'>\n              <span className='text-sm text-white inline-block'>\n                {currentTrack.name}\n              </span>\n            </div>\n            <span className='text-sm text-neutral-silver-200'>\n              {currentTrack.authors}\n            </span>\n            {isSharedLink && currentTrack.play_limit > 0 && (\n              <span className='text-xs text-neutral-silver-300'>\n                {currentTrack.play_limit - currentTrack.plays} reproducciones restantes\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","import * as React from 'react';\n\nexport default function TrackMobile({\n  currentTrack,\n  audioRef,\n  setDuration,\n  progressBarRef,\n  open\n}) {\n  // const onLoadedMetadata = () => {\n  //   const seconds = audioRef.current.duration;\n\n  //   setDuration(seconds);\n  //   progressBarRef.current.max = seconds;\n  // }\n\n  return (\n    <>\n      {/* <audio\n        src={currentTrack.url}\n        ref={audioRef}\n        onLoadedMetadata={onLoadedMetadata}\n      /> */}\n      {open ? (\n        <div>\n          <div>\n            <div className='flex gap-3 items-center justify-center -mb-2'>\n              <div\n                className='w-[286px] h-[286px] bg-cover rounded'\n                style={{ backgroundImage: `url(${currentTrack.cover_url})` }}>\n              </div>\n            </div>\n            <div\n              className='rounded-3xl px-5 pt-2 backdrop-blur-xl flex flex-col gap-1 items-center justify-center h-[160px]'\n              style={{ background: 'rgba(67, 71, 79, 0.30)' }}>\n              <span className='font-thunder-bold text-4xl uppercase !text-center'>\n                {currentTrack.name}\n              </span>\n              <span className='text-neutral-silver-200'>\n                {currentTrack?.authors?.join(', ')}\n              </span>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <div className='flex items-center grow min-w-0'>\n          <div className='flex gap-3 items-center min-w-0 flex-1'>\n            <div\n              className='w-10 h-10 bg-cover rounded min-w-[40px] flex-shrink-0'\n              style={{ backgroundImage: `url(${currentTrack.cover_url || 'https://cdn.chestmusic.com/cover-default.jpg'})` }}>\n            </div>\n            <div className='flex flex-col min-w-0 flex-1'>\n              <div className='w-full truncate'>\n                <span className='text-sm text-white truncate'>\n                  {currentTrack.name}\n                </span>\n              </div>\n              <span className='text-sm text-neutral-silver-200 truncate'>\n                {currentTrack?.authors?.join(', ')}\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  )\n}","import * as React from 'react';\nconst { useEffect, useRef, useState, useCallback } = React;\nimport { motion } from 'framer-motion';\nimport useMediaQuery from '../hooks/useMediaQuery';\nimport { useModal } from '../hooks/useModal';\n\nimport ProgressBar from './ProgressBar';\nimport ProgressBarMobile from './ProgressBarMobile';\nimport Controls from './Controls';\nimport ControlsMobile from './ControlsMobile';\nimport VolumeControls from './VolumeControls';\nimport Track from './Track';\nimport TrackMobile from './TrackMobile';\n\nimport { ChevronDownIcon } from '@heroicons/react/24/outline';\n\n// These will be injected by the parent app\nimport '../styles/player.css';\n\n// Get injected dependencies from parent app\nconst getDependencies = () => {\n  if (typeof window !== 'undefined' && window.__CHEST_PLAYER_DEPS__) {\n    return window.__CHEST_PLAYER_DEPS__;\n  }\n  throw new Error('ChestPlayer: Dependencies not provided. Make sure to use PlayerProvider.');\n};\n\nexport default function Player() {\n  const deps = getDependencies();\n  const { \n    useLazyGetTrackSourceQuery, \n    useUpdateTrackPlayMutation \n  } = deps.apiHooks;\n  const { reset, play } = deps.playlistActions;\n  const { closePlayer, openPlayer } = deps.playerActions;\n  const { dispatch, playlist, playerState } = deps.reduxProps;\n  const [isCounted, setIsCounted] = useState(false);\n  const [getTrackSource, getResult] = useLazyGetTrackSourceQuery();\n  const [updateTrackPlay, updateResult] = useUpdateTrackPlayMutation();\n  const { onOpen: openLimitModal } = useModal('PlayLimitModal');\n  const isMobile = useMediaQuery('(max-width: 768px)');\n\n  const [loop, setLoop] = useState(false);\n  const [timeProgress, setTimeProgress] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [trackList, setTrackList] = useState();\n  const [open, setOpen] = useState(false);\n  const [lastPlayed, setLastPlayed] = useState();\n  const [playCount, setPlayCount] = useState(0);\n  const [playLimit, setPlayLimit] = useState(null);\n  const [hasEnded, setHasEnded] = useState(false);\n  const [isLimitReached, setIsLimitReached] = useState(false);\n  const [hasDecremented, setHasDecremented] = useState(false);\n  \n  // Touch/swipe state\n  const [touchStart, setTouchStart] = useState(0);\n  const [isSwiping, setIsSwiping] = useState(false);\n  const [swipeDistance, setSwipeDistance] = useState(0);\n\n  const audioRef = useRef();\n  const progressBarRef = useRef();\n  const mobilePlayerRef = useRef();\n\n  const isSharedLink = !!playlist[0]?.token;\n\n  const [playStartTime, setPlayStartTime] = useState(null);\n  const [hasStartedFromBeginning, setHasStartedFromBeginning] = useState(false);\n  const MINIMUM_PLAY_PERCENTAGE = 15;\n\n  const [lastPlayPosition, setLastPlayPosition] = useState(0);\n  const [significantPlayTime, setSignificantPlayTime] = useState(false);\n  const SIGNIFICANT_PLAY_PERCENTAGE = 15;\n\n  const toggleOpen = () => {\n    setOpen((prev) => !prev);\n  };\n\n  // Touch handlers for mini player swipe-to-close (horizontal)\n  const handleMiniTouchStart = (e) => {\n    setTouchStart(e.touches[0].clientX);\n    setIsSwiping(false);\n    setSwipeDistance(0);\n  };\n\n  const handleMiniTouchMove = (e) => {\n    if (!touchStart) return;\n    \n    const currentTouch = e.touches[0].clientX;\n    const distance = currentTouch - touchStart;\n    \n    setIsSwiping(true);\n    setSwipeDistance(distance);\n    \n    // Update CSS custom property for animation\n    if (mobilePlayerRef.current) {\n      mobilePlayerRef.current.style.setProperty('--swipe-distance', `${distance}px`);\n    }\n  };\n\n  const handleMiniTouchEnd = (e) => {\n    if (!touchStart) return;\n    \n    const touchEnd = e.changedTouches[0].clientX;\n    const swipeDistanceEnd = Math.abs(touchStart - touchEnd);\n\n    // Reset swipe state\n    setIsSwiping(false);\n    setSwipeDistance(0);\n    \n    // Reset CSS custom property\n    if (mobilePlayerRef.current) {\n      mobilePlayerRef.current.style.setProperty('--swipe-distance', '0px');\n    }\n\n    // If swipe > threshold, close player completely\n    if (swipeDistanceEnd > 100) {\n      dispatch(closePlayer());\n    }\n    \n    setTouchStart(0);\n  };\n\n  // Touch handlers for expanded player swipe-to-close (vertical up)\n  const [expandedTouchStart, setExpandedTouchStart] = useState(0);\n  const [expandedIsSwiping, setExpandedIsSwiping] = useState(false);\n  const expandedPlayerRef = useRef();\n\n  const handleExpandedTouchStart = (e) => {\n    setExpandedTouchStart(e.touches[0].clientY);\n    setExpandedIsSwiping(true);\n    if (expandedPlayerRef.current) {\n      expandedPlayerRef.current.style.transition = 'none';\n    }\n  };\n\n  const handleExpandedTouchMove = (e) => {\n    if (!expandedTouchStart || !expandedIsSwiping) return;\n    \n    const currentY = e.touches[0].clientY;\n    const deltaY = currentY - expandedTouchStart; // Downward swipe\n    \n    // Only allow downward swipe (deltaY positive)\n    if (deltaY > 0 && expandedPlayerRef.current) {\n      expandedPlayerRef.current.style.transform = `translateY(${deltaY}px)`;\n      expandedPlayerRef.current.style.opacity = Math.max(0.3, 1 - (deltaY / 300));\n    }\n  };\n\n  const handleExpandedTouchEnd = (e) => {\n    if (!expandedTouchStart || !expandedIsSwiping) return;\n    \n    const touchEnd = e.changedTouches[0].clientY;\n    const deltaY = touchEnd - expandedTouchStart; // Downward swipe\n    \n    if (expandedPlayerRef.current) {\n      expandedPlayerRef.current.style.transition = 'transform 0.3s ease-out, opacity 0.3s ease-out';\n      \n      // If swiped down more than 150px, close the player\n      if (deltaY > 150) {\n        expandedPlayerRef.current.style.transform = 'translateY(100vh)';\n        expandedPlayerRef.current.style.opacity = '0';\n        \n        setTimeout(() => {\n          setOpen(false);\n          if (expandedPlayerRef.current) {\n            expandedPlayerRef.current.style.transform = 'translateY(0)';\n            expandedPlayerRef.current.style.opacity = '1';\n            expandedPlayerRef.current.style.transition = '';\n          }\n        }, 300);\n      } else {\n        // Snap back to original position\n        expandedPlayerRef.current.style.transform = 'translateY(0)';\n        expandedPlayerRef.current.style.opacity = '1';\n        \n        setTimeout(() => {\n          if (expandedPlayerRef.current) {\n            expandedPlayerRef.current.style.transition = '';\n          }\n        }, 300);\n      }\n    }\n    \n    setExpandedTouchStart(0);\n    setExpandedIsSwiping(false);\n  };\n\n\n  const onLoadedMetadata = () => {\n    const seconds = audioRef.current.duration;\n    setDuration(seconds);\n    if (progressBarRef.current) {\n      progressBarRef.current.max = seconds;\n    }\n  };\n\n\n  const checkPlayLimit = () => {\n    if (isSharedLink && playLimit !== null && playCount >= playLimit) {\n      openLimitModal();\n      if (audioRef.current) {\n        audioRef.current.pause();\n      }\n      return true;\n    }\n    return false;\n  };\n\n  useEffect(() => {\n    if (open) {\n      dispatch(openPlayer());\n    } else {\n      dispatch(closePlayer());\n    }\n  }, [open]);\n\n  useEffect(() => {\n    reset();\n  }, []);\n\n  useEffect(() => {\n    let track = trackList;\n    let currentTrack = playlist && playlist[0];\n\n    if (currentTrack) {\n      if (typeof track === 'object') {\n        if (track.id === currentTrack.id) return;\n      }\n      setIsCounted(false);\n      setPlayCount(currentTrack.plays || 0);\n      setPlayLimit(currentTrack.play_limit || null);\n      setHasDecremented(false);\n\n      if (currentTrack.audio) {\n        setTrackList({\n          url: currentTrack.audio,\n          cover_url: currentTrack.cover || 'https://cdn.chestmusic.com/cover-default.jpg',\n          name: currentTrack.name,\n          authors: currentTrack.authors,\n          type: currentTrack.type,\n          id: currentTrack.id,\n          plays: currentTrack.plays,\n          play_limit: currentTrack.play_limit,\n        });\n      } else {\n        const session = localStorage.getItem('chestmusic_session_id');\n        getTrackSource({ id: currentTrack.id, session }).then(({ data }) => {\n          if (data) {\n            setTrackList({\n              url: data.url,\n              cover_url: currentTrack.cover || 'https://cdn.chestmusic.com/cover-default.jpg',\n              name: currentTrack.name,\n              authors: currentTrack.authors,\n              type: currentTrack.type,\n              id: currentTrack.id,\n              plays: currentTrack.plays,\n              play_limit: currentTrack.play_limit,\n            });\n          }\n        });\n      }\n    }\n  }, [playlist, getResult]);\n\n  useEffect(() => {\n    if (!trackList) {\n      setLastPlayed('');\n    } else {\n      if (lastPlayed !== trackList.id) {\n        setLastPlayed(trackList.id);\n      }\n    }\n  }, [trackList]);\n\n  const getCurrentPlayCount = useCallback(() => {\n    if (isSharedLink && trackList?.id && playlist[0]?.token) {\n      const storageKey = `plays_${trackList.id}_${playlist[0].token}`;\n      const storedCount = localStorage.getItem(storageKey);\n      return storedCount ? parseInt(storedCount) : 0;\n    }\n    return 0;\n  }, [isSharedLink, trackList?.id, playlist[0]?.token]);\n\n  useEffect(() => {\n    if (isSharedLink && trackList?.id && playlist[0]?.token) {\n      // Usar el contador del backend al cargar\n      setPlayCount(trackList.plays || 0);\n\n      // Solo marcamos como límite alcanzado si hemos superado el límite\n      if ((trackList.plays || 0) > (playlist[0]?.play_limit || 0)) {\n        setIsLimitReached(true);\n        if (audioRef.current) {\n          audioRef.current.pause();\n        }\n      }\n    }\n  }, [isSharedLink, trackList?.id, playlist[0]?.token, trackList?.plays]);\n\n  const handlePlayAttempt = () => {\n    if (isSharedLink) {\n      const currentPlayLimit = playlist[0]?.play_limit;\n      if (currentPlayLimit) {\n        if (playCount > currentPlayLimit || (playCount >= currentPlayLimit && hasDecremented)) {\n          audioRef.current?.pause();\n          openLimitModal();\n          return false;\n        }\n      }\n    }\n    return true;\n  };\n\n  const decrementPlayCount = async () => {\n    if (isSharedLink && !isLimitReached) {\n      try {\n        // Actualizar el backend\n        await updateTrackPlay({\n          id: trackList.id,\n          anonymous: true,\n          token: playlist[0].token,\n        });\n\n        // Actualizar el estado local\n        const newPlayCount = playCount + 1;\n        setPlayCount(newPlayCount);\n\n        // Solo marcamos como límite alcanzado si hemos superado el límite\n        // esto permite que la última reproducción se complete\n        if (newPlayCount > playLimit) {\n          setIsLimitReached(true);\n          openLimitModal();\n          if (audioRef.current) {\n            audioRef.current.pause();\n          }\n        }\n      } catch (error) {\n        // Error updating play count - silently handle\n      }\n    }\n  };\n\n  const shouldCountAsNewPlay = (currentTime, previousTime) => {\n    if (!duration) return false;\n\n    const significantTime = duration * (SIGNIFICANT_PLAY_PERCENTAGE / 100);\n    const isNearStart = currentTime < significantTime;\n    const hasJumpedBack = previousTime > currentTime;\n    const wasSignificantlyAhead = previousTime > significantTime;\n\n    return hasJumpedBack && isNearStart && (significantPlayTime || wasSignificantlyAhead);\n  };\n\n  const handleTimeUpdate = () => {\n    if (!audioRef.current) return;\n\n    const currentTime = audioRef.current.currentTime;\n    const previousTime = lastPlayPosition;\n\n    if (currentTime > duration * (SIGNIFICANT_PLAY_PERCENTAGE / 100)) {\n      setSignificantPlayTime(true);\n    }\n\n    setLastPlayPosition(currentTime);\n    setTimeProgress(currentTime);\n  };\n\n  const handlePlay = () => {\n    if (!handlePlayAttempt()) {\n      audioRef.current?.pause();\n      return;\n    }\n\n    const currentTime = audioRef.current?.currentTime || 0;\n\n    if (currentTime < duration * (SIGNIFICANT_PLAY_PERCENTAGE / 100) && !hasDecremented) {\n      setSignificantPlayTime(false);\n      decrementPlayCount();\n      setHasDecremented(true);\n    }\n  };\n\n  const handleTrackEnd = () => {\n    setHasEnded(true);\n    setSignificantPlayTime(false);\n    setLastPlayPosition(0);\n    setHasDecremented(false);\n  };\n\n  useEffect(() => {\n    if (trackList && playlist[0]?.isPlaying) {\n      if (!handlePlayAttempt()) {\n        dispatch(play());\n        return;\n      }\n      \n      // Actually start audio playback\n      if (audioRef.current) {\n        let playPromise = audioRef.current.play();\n        \n        if (playPromise !== undefined) {\n          playPromise\n            .catch(error => {\n              // Handle autoplay policy restrictions on mobile\n              // Autoplay blocked - user gesture required\n            });\n        }\n      }\n    }\n  }, [trackList, playlist[0]?.isPlaying]);\n\n  useEffect(() => {\n    if (playlist[0]?.id !== lastPlayed) {\n      setHasEnded(false);\n      setSignificantPlayTime(false);\n      setLastPlayPosition(0);\n      setHasDecremented(false);\n    }\n  }, [playlist[0]?.id]);\n\n  return (\n    <>\n      {trackList && playlist.length > 0 && (\n        <>\n          <audio\n            src={trackList.url}\n            ref={audioRef}\n            onLoadedMetadata={onLoadedMetadata}\n            onEnded={handleTrackEnd}\n            onTimeUpdate={handleTimeUpdate}\n            onPlay={handlePlay}\n          />\n          {isSharedLink && playLimit !== null && playLimit > 0 && (\n            <div className='fixed bottom-[102px] right-0 left-0 inset-x-0 max-w-max mx-auto z-50'>\n              <motion.div\n                initial={{ opacity: 0, y: 40 }}\n                animate={{ opacity: 1, y: 0 }}\n                className='px-6 py-3 bg-neutral-silver-600 rounded-t-xl'\n              >\n                <span className='text-brand-gold'>{Math.max(0, playLimit - playCount)}</span> of {playLimit} plays\n                remaining\n              </motion.div>\n            </div>\n          )}\n          {!isMobile ? (\n            <motion.div\n              className='audio-player'\n              initial={{ height: 0 }}\n              animate={{ height: 'auto' }}\n              exit={{\n                height: 0,\n                transition: { delay: 0.7, duration: 1, ease: 'easeIn' },\n              }}\n            >\n              <Track\n                {...{\n                  currentTrack: trackList,\n                  audioRef,\n                  setDuration,\n                  progressBarRef,\n                  dispatch,\n                  playlist,\n                }}\n              />\n              <div className='grow flex flex-col items-center justify-center gap-1.5'>\n                <Controls\n                  {...{\n                    audioRef,\n                    progressBarRef,\n                    duration,\n                    setTimeProgress,\n                    setLoop,\n                    loop,\n                    dispatch,\n                    playlist,\n                  }}\n                />\n                <ProgressBar\n                  {...{\n                    progressBarRef,\n                    audioRef,\n                    timeProgress,\n                    duration,\n                    playlist,\n                  }}\n                />\n              </div>\n              <VolumeControls\n                {...{\n                  audioRef,\n                  dispatch,\n                }}\n              />\n            </motion.div>\n          ) : (\n            <>\n              <div className={`${open ? 'audio-player-mobile-open' : 'audio-player-mobile'}`}>\n                {!open ? (\n                  <div \n                    ref={mobilePlayerRef}\n                    className={`flex flex-row min-w-0 w-full ${isSwiping ? 'swiping' : ''}`}\n                    onClick={toggleOpen}\n                    onTouchStart={handleMiniTouchStart}\n                    onTouchMove={handleMiniTouchMove}\n                    onTouchEnd={handleMiniTouchEnd}\n                  >\n                    <TrackMobile\n                      {...{\n                        currentTrack: trackList,\n                        audioRef,\n                        setDuration,\n                        progressBarRef,\n                        dispatch,\n                        playlist,\n                      }}\n                    />\n                    <ControlsMobile\n                      {...{\n                        audioRef,\n                        progressBarRef,\n                        duration,\n                        setTimeProgress,\n                        setLoop,\n                        loop,\n                        dispatch,\n                        playlist,\n                      }}\n                    />\n                  </div>\n                ) : (\n                  <div className='fixed inset-0 z-50 flex items-center justify-center'>\n                    {/* Transparent overlay at 60% */}\n                    <div \n                      className='absolute top-0 left-0 w-screen h-screen'\n                      style={{ backgroundColor: 'rgba(0, 0, 0, 0.6)' }}\n                    ></div>\n                    \n                    {/* Player container */}\n                    <div \n                      ref={expandedPlayerRef}\n                      className='relative z-50 backdrop-blur-md rounded-2xl m-4 flex flex-col w-full max-w-sm bg-black'\n          \n                      onTouchStart={handleExpandedTouchStart}\n                      onTouchMove={handleExpandedTouchMove}\n                      onTouchEnd={handleExpandedTouchEnd}\n                    >\n                      {/* Main content container */}\n                      <div className='flex flex-col items-center justify-center px-4 py-4'>\n                          {/* Title */}\n                          <div className='text-center mb-2'>\n                            <span className='font-thunder-bold text-white text-center block' style={{fontSize: '32px', lineHeight: '1.1'}}>\n                              {trackList.name}\n                            </span>\n                          </div>\n                          \n                          {/* Artist */}\n                          <div className='text-center mb-4'>\n                            <span className='text-neutral-silver-200' style={{fontSize: '16px'}}>\n                              {trackList?.authors?.join(', ')}\n                            </span>\n                          </div>\n                          \n                          {/* Cover */}\n                          <div className='mb-8 w-full px-4'>\n                            <div\n                              className='w-full shadow-2xl max-w-sm mx-auto'\n                              style={{ \n                                aspectRatio: '1',\n                                minHeight: '200px',\n                                backgroundImage: `url(${trackList.cover_url || 'https://cdn.chestmusic.com/cover-default.jpg'})`,\n                                backgroundSize: 'cover',\n                                backgroundPosition: 'center',\n                                backgroundRepeat: 'no-repeat',\n                                borderRadius: '11px'\n                              }}>\n                            </div>\n                          </div>\n                          \n                          {/* Progress Bar Container */}\n                          <div className='w-full px-4 mb-4'>\n                            <ProgressBarMobile\n                              {...{\n                                progressBarRef,\n                                audioRef,\n                                timeProgress,\n                                duration,\n                                open,\n                                playlist,\n                              }}\n                            />\n                          </div>\n                          \n                          {/* Controls with mobile expanded layout */}\n                          <Controls\n                            {...{\n                              audioRef,\n                              progressBarRef,\n                              duration,\n                              setTimeProgress,\n                              setLoop,\n                              loop,\n                              dispatch,\n                              playlist,\n                              mobileExpanded: true\n                            }}\n                          />\n                        </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n}\n","import * as React from 'react';\n\n/**\n * SharedLinkBanner component adapted from share repository\n * Displays promotional banner for Chest Music platform\n * @param {Object} props\n * @param {string} [props.title1] - First line of title\n * @param {string} [props.title2] - Second line of title  \n * @param {string} [props.title3] - Third line of title\n * @param {string} [props.signUpText] - Sign up button text\n * @param {string} [props.signUpUrl] - Sign up button URL\n * @param {string} [props.coverImage] - Cover image URL\n * @param {boolean} [props.isMobile] - Mobile layout flag\n */\nexport default function SharedLinkBanner({\n  title1 = \"Sube tus\",\n  title2 = \"maquetas y\",\n  title3 = \"compártelas\",\n  signUpText = \"Regístrate\",\n  signUpUrl = \"https://chestmusic.com\",\n  coverImage = \"/assets/images/cover-track.png\",\n  isMobile = false\n}) {\n  if (isMobile) {\n    return (\n      <div className=\"p-4\">\n        <div className=\"bg-neutral-black p-6 rounded-2xl\">\n          <div className=\"flex flex-col gap-4 text-center\">\n            <h3 className=\"text-2xl font-thunder-bold text-neutral-silver-200 leading-tight\">\n              {title1} <br />\n              {title2} <br />\n              {title3}\n            </h3>\n            <div className=\"flex justify-center\">\n              <img\n                src={coverImage}\n                alt=\"cover\"\n                className=\"w-48 h-24 rounded-lg object-cover\"\n              />\n            </div>\n            <div className=\"w-full\">\n              <a \n                href={signUpUrl} \n                className=\"btn btn-primary w-full text-center block py-3 px-6 bg-brand-gold text-neutral-black font-semibold rounded-lg hover:bg-brand-gold-hover transition-colors\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {signUpText}\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"pt-5 pb-20\">\n      <div className=\"p-10 bg-neutral-black flex gap-x-20 rounded-2xl\">\n        <div className=\"w-2/4 h-full flex flex-col gap-y-6\">\n          <h3 className=\"text-[64px] font-thunder-bold pr-10 leading-[58px] text-neutral-silver-200\">\n            {title1} <br />\n            {title2} <br />\n            {title3}\n          </h3>\n          <div className=\"w-1/3\">\n            <a \n              href={signUpUrl} \n              className=\"btn btn-primary inline-block py-3 px-6 bg-brand-gold text-neutral-black font-semibold rounded-lg hover:bg-brand-gold-hover transition-colors\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {signUpText}\n            </a>\n          </div>\n        </div>\n        <div className=\"w-2/4\">\n          <img\n            src={coverImage}\n            alt=\"cover\"\n            className=\"w-[620px] h-[300px] rounded-lg object-cover\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}","/**\n * Capitalize first letter of a word\n * From share repository for compatibility\n * @param {string} word \n * @returns {string}\n */\nexport const capitalize = (word) => {\n  if (typeof word !== \"string\" || word.length === 0) return \"\";\n  return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n};","// Utility functions to transform between different track formats\n// Maintains compatibility between share repo and player formats\nimport { capitalize } from './capitalize';\n\n/**\n * Transform ShareTrack (from share repo) to ChestTrack (player format)\n * @param {import('../types/track').ShareTrack} shareTrack \n * @param {string} token \n * @returns {import('../types/track').ChestTrack}\n */\nexport function shareTrackToChestTrack(shareTrack, token = null) {\n  return {\n    id: token || generateTrackId(shareTrack),\n    name: shareTrack.title,\n    title: shareTrack.title, // Keep both for compatibility\n    authors: shareTrack.authors,\n    cover: shareTrack.cover_url,\n    cover_url: shareTrack.cover_url, // Keep both for compatibility\n    audio: shareTrack.audio_url,\n    audio_url: shareTrack.audio_url, // Keep both for compatibility\n    album: shareTrack.album,\n    version_name: shareTrack.version_name,\n    token: token,\n    isPlaying: false,\n    plays: 0,\n    play_limit: null,\n    type: 'shared'\n  };\n}\n\n/**\n * Transform ChestTrack to ShareTrack format\n * @param {import('../types/track').ChestTrack} chestTrack \n * @returns {import('../types/track').ShareTrack}\n */\nexport function chestTrackToShareTrack(chestTrack) {\n  return {\n    title: chestTrack.title || chestTrack.name,\n    authors: chestTrack.authors || [],\n    album: chestTrack.album || '',\n    version_name: chestTrack.version_name || '',\n    cover_url: chestTrack.cover_url || chestTrack.cover || 'https://cdn.chestmusic.com/cover-default.jpg',\n    audio_url: chestTrack.audio_url || chestTrack.audio || ''\n  };\n}\n\n/**\n * Generate SEO metadata from track data\n * @param {import('../types/track').ChestTrack} track \n * @returns {import('../types/track').SEOMetadata}\n */\nexport function generateSEOMetadata(track) {\n  const title = track.title || track.name;\n  const authors = track.authors?.join(', ') || '';\n  const coverUrl = track.cover_url || track.cover || 'https://cdn.chestmusic.com/cover-default.jpg';\n  const audioUrl = track.audio_url || track.audio || '';\n\n  return {\n    title: `${capitalize(title)} - ${authors}`,\n    description: 'Chest - El hogar de tus maquetas',\n    author: authors,\n    image: coverUrl,\n    audio: audioUrl,\n    type: 'music.song',\n    musician: authors,\n    album: track.album || ''\n  };\n}\n\n/**\n * Generate social media metadata from track data\n * @param {import('../types/track').ChestTrack} track \n * @returns {import('../types/track').SocialMetadata}\n */\nexport function generateSocialMetadata(track) {\n  const title = track.title || track.name;\n  const authors = track.authors?.join(', ') || '';\n  const coverUrl = track.cover_url || track.cover || 'https://cdn.chestmusic.com/cover-default.jpg';\n  const audioUrl = track.audio_url || track.audio || '';\n  const fullTitle = `${capitalize(title)} - ${authors}`;\n  const description = 'Chest - El hogar de tus maquetas';\n\n  return {\n    ogTitle: fullTitle,\n    ogDescription: description,\n    ogImage: coverUrl,\n    ogAudio: audioUrl,\n    ogType: 'music.song',\n    twitterCard: 'summary_large_image',\n    twitterTitle: fullTitle,\n    twitterDescription: description,\n    twitterImage: coverUrl\n  };\n}\n\n/**\n * Check if track has share-compatible data\n * @param {import('../types/track').ChestTrack} track \n * @returns {boolean}\n */\nexport function isShareCompatible(track) {\n  return !!(track.token && (track.audio_url || track.audio));\n}\n\n/**\n * Generate a track ID from share data\n * @param {import('../types/track').ShareTrack} shareTrack \n * @returns {string}\n */\nfunction generateTrackId(shareTrack) {\n  return `share_${shareTrack.title.toLowerCase().replace(/\\s+/g, '_')}_${Date.now()}`;\n}\n\n","import { useEffect, useMemo } from 'react';\nimport { generateSEOMetadata, generateSocialMetadata } from '../utils/trackTransforms';\n\n/**\n * Hook for managing SEO metadata dynamically\n * Updates document head with track information for better social sharing\n * @param {import('../types/track').ChestTrack} track - Track data\n * @param {Object} options - SEO options\n * @param {boolean} [options.enabled=true] - Whether to enable SEO updates\n * @param {string} [options.baseTitle] - Base title for the page\n * @param {string} [options.baseDescription] - Base description\n * @param {string} [options.siteName] - Site name for OpenGraph\n * @returns {Object} SEO metadata object\n */\nexport function useSEOMetadata(track, options = {}) {\n  const {\n    enabled = true,\n    baseTitle = '',\n    baseDescription = 'Chest - El hogar de tus maquetas',\n    siteName = 'Chest Music'\n  } = options;\n\n  const seoData = useMemo(() => {\n    if (!track || !enabled) return null;\n\n    const seoMetadata = generateSEOMetadata(track);\n    const socialMetadata = generateSocialMetadata(track);\n\n    return {\n      ...seoMetadata,\n      ...socialMetadata,\n      siteName,\n      baseTitle,\n      baseDescription\n    };\n  }, [track, enabled, baseTitle, baseDescription, siteName]);\n\n  useEffect(() => {\n    if (!seoData || typeof document === 'undefined') return;\n\n    // Store original meta tags to restore later\n    const originalTags = new Map();\n\n    const updateMetaTag = (property, content, useProperty = false) => {\n      if (!content) return;\n\n      const selector = useProperty ? `meta[property=\"${property}\"]` : `meta[name=\"${property}\"]`;\n      let tag = document.querySelector(selector);\n\n      if (!tag) {\n        tag = document.createElement('meta');\n        if (useProperty) {\n          tag.setAttribute('property', property);\n        } else {\n          tag.setAttribute('name', property);\n        }\n        document.head.appendChild(tag);\n        originalTags.set(property, null); // Mark as new tag\n      } else {\n        originalTags.set(property, tag.getAttribute('content')); // Store original content\n      }\n\n      tag.setAttribute('content', content);\n    };\n\n    // Update document title\n    const originalTitle = document.title;\n    if (seoData.title) {\n      document.title = seoData.title;\n    }\n\n    // Update basic meta tags\n    updateMetaTag('description', seoData.description);\n    updateMetaTag('author', seoData.author);\n\n    // Update OpenGraph tags\n    updateMetaTag('og:title', seoData.ogTitle, true);\n    updateMetaTag('og:description', seoData.ogDescription, true);\n    updateMetaTag('og:image', seoData.ogImage, true);\n    updateMetaTag('og:type', seoData.ogType, true);\n    updateMetaTag('og:site_name', siteName, true);\n\n    // Music-specific OpenGraph tags\n    if (seoData.ogAudio) {\n      updateMetaTag('og:audio', seoData.ogAudio, true);\n      updateMetaTag('og:audio:type', 'audio/mpeg', true);\n    }\n    if (seoData.musician) {\n      updateMetaTag('music:musician', seoData.musician, true);\n    }\n    if (seoData.album) {\n      updateMetaTag('music:album', seoData.album, true);\n    }\n\n    // Update Twitter Card tags\n    updateMetaTag('twitter:card', seoData.twitterCard);\n    updateMetaTag('twitter:title', seoData.twitterTitle);\n    updateMetaTag('twitter:description', seoData.twitterDescription);\n    updateMetaTag('twitter:image', seoData.twitterImage);\n\n    // Cleanup function to restore original tags\n    return () => {\n      document.title = originalTitle;\n\n      originalTags.forEach((originalContent, property) => {\n        const selector = property.startsWith('og:') || property.startsWith('music:') \n          ? `meta[property=\"${property}\"]` \n          : `meta[name=\"${property}\"]`;\n        const tag = document.querySelector(selector);\n\n        if (tag) {\n          if (originalContent === null) {\n            // Remove tag that didn't exist before\n            tag.remove();\n          } else {\n            // Restore original content\n            tag.setAttribute('content', originalContent);\n          }\n        }\n      });\n    };\n  }, [seoData]);\n\n  return seoData;\n}\n\n/**\n * Hook for generating share URLs and metadata\n * @param {import('../types/track').ChestTrack} track - Track data\n * @param {string} [baseUrl] - Base URL for sharing\n * @returns {Object} Share utilities\n */\nexport function useShareMetadata(track, baseUrl = '') {\n  const seoData = useSEOMetadata(track, { enabled: false }); // Get metadata without DOM updates\n\n  const shareData = useMemo(() => {\n    if (!track || !seoData) return null;\n\n    const shareUrl = track.token ? `${baseUrl}/shared-link/${track.token}` : '';\n    const shareText = `Escucha \"${seoData.title}\" en Chest Music`;\n\n    return {\n      url: shareUrl,\n      title: seoData.title,\n      text: shareText,\n      image: seoData.ogImage,\n      \n      // Social platform specific URLs\n      facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`,\n      twitter: `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`,\n      whatsapp: `https://wa.me/?text=${encodeURIComponent(`${shareText} ${shareUrl}`)}`,\n      telegram: `https://t.me/share/url?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(shareText)}`,\n      \n      // Native sharing (if supported)\n      canShare: typeof navigator !== 'undefined' && navigator.share,\n      nativeShare: () => {\n        if (typeof navigator !== 'undefined' && navigator.share) {\n          return navigator.share({\n            title: seoData.title,\n            text: shareText,\n            url: shareUrl,\n          });\n        }\n        return Promise.reject(new Error('Native sharing not supported'));\n      }\n    };\n  }, [track, seoData, baseUrl]);\n\n  return shareData;\n}","import * as React from 'react';\nconst { useState, useEffect } = React;\nimport { capitalize } from '../../utils/capitalize';\nimport SharedLinkBanner from './SharedLinkBanner';\nimport useMediaQuery from '../../hooks/useMediaQuery';\nimport { useSEOMetadata } from '../../hooks/useSEOMetadata';\n\n/**\n * SharedLinkPage component - displays shared track with SEO optimization\n * Adapted from share repository for embedding in apps\n * @param {Object} props\n * @param {import('../../types/track').ChestTrack} props.track - Track data\n * @param {boolean} [props.showBanner] - Whether to show promotional banner\n * @param {boolean} [props.showPlayer] - Whether to show embedded player\n * @param {React.ComponentType} [props.PlayerComponent] - Player component to embed\n * @param {Object} [props.playerProps] - Props to pass to player component\n * @param {Function} [props.onPlayTrack] - Callback when track is played\n * @param {boolean} [props.enableSEO] - Enable SEO metadata updates\n * @param {string} [props.baseUrl] - Base URL for share links\n */\nexport default function SharedLinkPage({\n  track,\n  showBanner = true,\n  showPlayer = false,\n  PlayerComponent = null,\n  playerProps = {},\n  onPlayTrack = null,\n  enableSEO = true,\n  baseUrl = ''\n}) {\n  const [displayBanner, setDisplayBanner] = useState(false);\n  const isMobile = useMediaQuery('(max-width: 768px)');\n\n  // SEO metadata generation\n  const seoData = useSEOMetadata(track, { \n    enabled: enableSEO,\n    baseTitle: 'Chest Music',\n    baseDescription: 'Escucha esta canción en Chest Music - El hogar de tus maquetas',\n    siteName: 'Chest Music'\n  });\n\n  // Prevent hydration error\n  useEffect(() => {\n    setDisplayBanner(true);\n  }, []);\n\n  const handlePlayClick = () => {\n    if (onPlayTrack && typeof onPlayTrack === 'function') {\n      onPlayTrack(track);\n    }\n  };\n\n  if (!track) {\n    return (\n      <div className=\"min-h-screen w-full flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-thunder-bold mb-4\">Track no encontrado</h2>\n          <p className=\"text-neutral-silver-200\">El enlace compartido no es válido o ha expirado.</p>\n        </div>\n      </div>\n    );\n  }\n\n  const trackTitle = track.title || track.name;\n  const trackAuthors = track.authors?.join(', ') || '';\n  const trackCover = track.cover_url || track.cover || 'https://cdn.chestmusic.com/cover-default.jpg';\n  const trackAlbum = track.album || '';\n  const trackVersion = track.version_name || '';\n\n  return (\n    <main className=\"min-h-screen w-full relative\">\n      {/* Desktop Layout */}\n      <div className=\"hidden lg:block lg:container mx-auto px-4 pt-[50px]\">\n        <div className=\"lg:pt-[60px] lg:pb-[40px] flex lg:gap-x-12 items-center\">\n          <div>\n            <img\n              src={trackCover}\n              className=\"lg:w-[220px] lg:h-[220px] lg:rounded-lg object-cover\"\n              alt={`Cover for ${trackTitle}`}\n            />\n          </div>\n          <div className=\"flex flex-col\">\n            <div className=\"lg:mb-6\">\n              <p className=\"text-left text-neutral-silver-200 text-base flex items-center gap-2\">\n                {trackAlbum}\n                {trackAlbum && trackVersion && (\n                  <>\n                    <img\n                      src=\"/assets/images/icon-rectangle.png\"\n                      alt=\"separator\"\n                      className=\"h-[3px]\"\n                    />\n                    {trackVersion}\n                  </>\n                )}\n              </p>\n            </div>\n            <div className=\"lg:mb-3\">\n              <h2 className=\"lg:text-[76px] leading-[68px] font-thunder-bold\">\n                {trackTitle}\n              </h2>\n            </div>\n            <div className=\"lg:mb-6\">\n              <p className=\"text-left lg:text-[22px] capitalize\">\n                {trackAuthors}\n              </p>\n            </div>\n            \n            {/* Play button for desktop */}\n            {onPlayTrack && (\n              <div className=\"lg:mb-4\">\n                <button\n                  onClick={handlePlayClick}\n                  className=\"btn btn-primary py-3 px-8 bg-brand-gold text-neutral-black font-semibold rounded-lg hover:bg-brand-gold-hover transition-colors\"\n                >\n                  ▶ Reproducir\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n        \n        {/* Embedded Player for desktop */}\n        {showPlayer && PlayerComponent && (\n          <div className=\"lg:mb-8\">\n            <PlayerComponent {...playerProps} />\n          </div>\n        )}\n        \n        {/* Banner for desktop */}\n        {displayBanner && showBanner && <SharedLinkBanner isMobile={false} />}\n      </div>\n\n      {/* Mobile Layout */}\n      <div className=\"p-3 h-screen bg-neutral-black lg:hidden pt-[50px]\">\n        <div className=\"w-full h-[510px] bg-neutral-silver-700 rounded-3xl py-2\">\n          <div className=\"mb-5 py-2 pt-4\">\n            <p className=\"font-semibold text-center text-neutral-silver-200\">\n              {trackAlbum} {trackVersion && `• ${trackVersion}`}\n            </p>\n          </div>\n          <div className=\"flex justify-center\">\n            <img\n              src={trackCover}\n              alt={`Cover for ${trackTitle}`}\n              className=\"w-[286px] h-[286px] rounded-md object-cover\"\n            />\n          </div>\n          <div className=\"h-[160px] rounded-[20px] px-5 py-2 w-full bg-custom-opacity flex flex-col justify-center items-center\">\n            <h5 className=\"uppercase font-thunder-bold text-[36px] leading-[32px] text-center\">\n              {trackTitle}\n            </h5>\n            <p className=\"text-base text-neutral-silver-200 capitalize text-center mb-4\">\n              {trackAuthors}\n            </p>\n            \n            {/* Play button for mobile */}\n            {onPlayTrack && (\n              <button\n                onClick={handlePlayClick}\n                className=\"btn btn-primary py-2 px-6 bg-brand-gold text-neutral-black font-semibold rounded-lg hover:bg-brand-gold-hover transition-colors\"\n              >\n                ▶ Reproducir\n              </button>\n            )}\n          </div>\n        </div>\n        \n        {/* Embedded Player for mobile */}\n        {showPlayer && PlayerComponent && (\n          <div className=\"mt-4\">\n            <PlayerComponent {...playerProps} />\n          </div>\n        )}\n        \n        {/* Banner for mobile */}\n        {displayBanner && showBanner && <SharedLinkBanner isMobile={true} />}\n      </div>\n    </main>\n  );\n}","import * as React from 'react';\nconst { useState, useEffect, useCallback } = React;\nimport Player from './Player';\nimport { SharedLinkPage } from './share';\nimport { useSEOMetadata, useShareMetadata } from '../hooks/useSEOMetadata';\nimport { shareTrackToChestTrack } from '../utils/trackTransforms';\n\n/**\n * Enhanced Player component with Share capabilities\n * Combines the existing player with SEO-optimized shared link display\n * @param {Object} props\n * @param {import('../types/track').ShareTrack} [props.shareTrack] - Share format track data\n * @param {import('../types/track').ChestTrack} [props.track] - Player format track data  \n * @param {string} [props.token] - Share token\n * @param {boolean} [props.showSharePage] - Whether to show the share page layout\n * @param {boolean} [props.showBanner] - Whether to show promotional banner\n * @param {boolean} [props.enableSEO] - Whether to enable SEO metadata updates\n * @param {string} [props.baseUrl] - Base URL for share links\n * @param {Object} [props.playerProps] - Additional props to pass to Player component\n * @param {Function} [props.onTrackLoad] - Callback when track is loaded\n * @param {Function} [props.onPlayTrack] - Callback when track play is triggered\n */\nexport default function PlayerWithShare({\n  shareTrack = null,\n  track = null,\n  token = null,\n  showSharePage = false,\n  showBanner = true,\n  enableSEO = true,\n  baseUrl = '',\n  playerProps = {},\n  onTrackLoad = null,\n  onPlayTrack = null\n}) {\n  const [currentTrack, setCurrentTrack] = useState(null);\n  const [isPlayerVisible, setIsPlayerVisible] = useState(false);\n\n  // Transform shareTrack to ChestTrack format if needed\n  useEffect(() => {\n    if (shareTrack && token) {\n      const transformedTrack = shareTrackToChestTrack(shareTrack, token);\n      setCurrentTrack(transformedTrack);\n      if (onTrackLoad) {\n        onTrackLoad(transformedTrack);\n      }\n    } else if (track) {\n      setCurrentTrack(track);\n      if (onTrackLoad) {\n        onTrackLoad(track);\n      }\n    }\n  }, [shareTrack, track, token, onTrackLoad]);\n\n  // Initialize SEO metadata\n  const seoData = useSEOMetadata(currentTrack, { enabled: enableSEO });\n  const shareData = useShareMetadata(currentTrack, baseUrl);\n\n  // Handle play track from share page\n  const handlePlayTrack = useCallback((trackToPlay) => {\n    setIsPlayerVisible(true);\n    if (onPlayTrack) {\n      onPlayTrack(trackToPlay);\n    }\n  }, [onPlayTrack]);\n\n  // Get dependencies from global scope (same as existing Player component)\n  const getDependencies = () => {\n    if (typeof window !== 'undefined' && window.__CHEST_PLAYER_DEPS__) {\n      return window.__CHEST_PLAYER_DEPS__;\n    }\n    throw new Error('ChestPlayer: Dependencies not provided. Make sure to use PlayerProvider.');\n  };\n\n  if (!currentTrack) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"text-center\">\n          <h2 className=\"text-xl font-thunder-bold mb-2\">Cargando track...</h2>\n          <p className=\"text-neutral-silver-200\">Preparando la reproducción</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"chest-player-with-share\">\n      {showSharePage && (\n        <SharedLinkPage\n          track={currentTrack}\n          showBanner={showBanner}\n          showPlayer={isPlayerVisible}\n          PlayerComponent={Player}\n          playerProps={playerProps}\n          onPlayTrack={handlePlayTrack}\n        />\n      )}\n      \n      {/* Always render Player for functionality, but conditionally show it */}\n      <div className={showSharePage && !isPlayerVisible ? 'hidden' : ''}>\n        <Player {...playerProps} />\n      </div>\n      \n      {/* Development helper - show SEO data in development */}\n      {process.env.NODE_ENV === 'development' && seoData && (\n        <div className=\"fixed bottom-4 right-4 bg-black bg-opacity-75 text-white p-4 rounded-lg text-xs max-w-xs z-50\">\n          <h4 className=\"font-bold mb-2\">SEO Debug Info:</h4>\n          <p><strong>Title:</strong> {seoData.title}</p>\n          <p><strong>Share URL:</strong> {shareData?.url}</p>\n          <p><strong>Token:</strong> {currentTrack.token}</p>\n        </div>\n      )}\n    </div>\n  );\n}","/**\n * SEO Helper utilities for better search engine optimization\n * and social media sharing\n */\n\n/**\n * Generate structured data (JSON-LD) for music tracks\n * @param {import('../types/track').ChestTrack} track \n * @returns {Object} Structured data object\n */\nexport function generateMusicStructuredData(track) {\n  if (!track) return null;\n\n  const trackTitle = track.title || track.name;\n  const trackAuthors = track.authors?.join(', ') || '';\n  const trackCover = track.cover_url || track.cover || 'https://cdn.chestmusic.com/cover-default.jpg';\n  const trackAudio = track.audio_url || track.audio || '';\n\n  return {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"MusicRecording\",\n    \"name\": trackTitle,\n    \"byArtist\": {\n      \"@type\": \"MusicGroup\",\n      \"name\": trackAuthors\n    },\n    \"inAlbum\": track.album ? {\n      \"@type\": \"MusicAlbum\",\n      \"name\": track.album\n    } : undefined,\n    \"image\": trackCover,\n    \"audio\": trackAudio ? {\n      \"@type\": \"AudioObject\",\n      \"contentUrl\": trackAudio,\n      \"encodingFormat\": \"audio/mpeg\"\n    } : undefined,\n    \"publisher\": {\n      \"@type\": \"Organization\",\n      \"name\": \"Chest Music\",\n      \"url\": \"https://chestmusic.com\"\n    },\n    \"potentialAction\": {\n      \"@type\": \"ListenAction\",\n      \"target\": trackAudio\n    }\n  };\n}\n\n/**\n * Inject structured data into document head\n * @param {Object} structuredData \n * @returns {Function} Cleanup function\n */\nexport function injectStructuredData(structuredData) {\n  if (typeof document === 'undefined' || !structuredData) {\n    return () => {};\n  }\n\n  const script = document.createElement('script');\n  script.type = 'application/ld+json';\n  script.textContent = JSON.stringify(structuredData);\n  script.id = 'chest-music-structured-data';\n\n  // Remove existing structured data if present\n  const existing = document.getElementById('chest-music-structured-data');\n  if (existing) {\n    existing.remove();\n  }\n\n  document.head.appendChild(script);\n\n  return () => {\n    const scriptToRemove = document.getElementById('chest-music-structured-data');\n    if (scriptToRemove) {\n      scriptToRemove.remove();\n    }\n  };\n}\n\n/**\n * Generate meta tags as HTML string for SSR\n * @param {import('../types/track').ChestTrack} track \n * @param {Object} options \n * @returns {string} HTML string with meta tags\n */\nexport function generateMetaTagsHTML(track, options = {}) {\n  if (!track) return '';\n\n  const {\n    baseUrl = '',\n    siteName = 'Chest Music',\n    description = 'Chest - El hogar de tus maquetas'\n  } = options;\n\n  const trackTitle = track.title || track.name;\n  const trackAuthors = track.authors?.join(', ') || '';\n  const trackCover = track.cover_url || track.cover || 'https://cdn.chestmusic.com/cover-default.jpg';\n  const trackAudio = track.audio_url || track.audio || '';\n  const fullTitle = `${trackTitle} - ${trackAuthors}`;\n  const shareUrl = track.token ? `${baseUrl}/shared-link/${track.token}` : '';\n\n  const metaTags = [\n    `<title>${fullTitle}</title>`,\n    `<meta name=\"description\" content=\"${description}\" />`,\n    `<meta name=\"author\" content=\"${trackAuthors}\" />`,\n    \n    // OpenGraph tags\n    `<meta property=\"og:type\" content=\"music.song\" />`,\n    `<meta property=\"og:title\" content=\"${fullTitle}\" />`,\n    `<meta property=\"og:description\" content=\"${description}\" />`,\n    `<meta property=\"og:image\" content=\"${trackCover}\" />`,\n    `<meta property=\"og:site_name\" content=\"${siteName}\" />`,\n    shareUrl ? `<meta property=\"og:url\" content=\"${shareUrl}\" />` : '',\n    \n    // Music specific OpenGraph\n    `<meta property=\"music:musician\" content=\"${trackAuthors}\" />`,\n    track.album ? `<meta property=\"music:album\" content=\"${track.album}\" />` : '',\n    trackAudio ? `<meta property=\"og:audio\" content=\"${trackAudio}\" />` : '',\n    trackAudio ? `<meta property=\"og:audio:type\" content=\"audio/mpeg\" />` : '',\n    \n    // Twitter Card tags\n    `<meta name=\"twitter:card\" content=\"summary_large_image\" />`,\n    `<meta name=\"twitter:title\" content=\"${fullTitle}\" />`,\n    `<meta name=\"twitter:description\" content=\"${description}\" />`,\n    `<meta name=\"twitter:image\" content=\"${trackCover}\" />`,\n    \n    // Additional SEO tags\n    `<meta name=\"robots\" content=\"index, follow\" />`,\n    `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />`,\n    `<link rel=\"canonical\" href=\"${shareUrl}\" />`\n  ].filter(Boolean);\n\n  return metaTags.join('\\n');\n}\n\n/**\n * Check if the current environment supports dynamic meta updates\n * @returns {boolean}\n */\nexport function canUpdateMetaTags() {\n  return typeof document !== 'undefined' && typeof window !== 'undefined';\n}\n\n/**\n * Get current page URL for sharing\n * @returns {string}\n */\nexport function getCurrentShareUrl() {\n  if (typeof window === 'undefined') return '';\n  return window.location.href;\n}\n\n/**\n * Copy text to clipboard\n * @param {string} text \n * @returns {Promise<boolean>}\n */\nexport async function copyToClipboard(text) {\n  if (typeof navigator === 'undefined') return false;\n\n  try {\n    if (navigator.clipboard) {\n      await navigator.clipboard.writeText(text);\n      return true;\n    } else {\n      // Fallback for older browsers\n      const textArea = document.createElement('textarea');\n      textArea.value = text;\n      textArea.style.position = 'fixed';\n      textArea.style.opacity = '0';\n      document.body.appendChild(textArea);\n      textArea.focus();\n      textArea.select();\n      \n      const successful = document.execCommand('copy');\n      document.body.removeChild(textArea);\n      return successful;\n    }\n  } catch (err) {\n    console.error('Failed to copy to clipboard:', err);\n    return false;\n  }\n}\n\n/**\n * Validate track data for SEO completeness\n * @param {import('../types/track').ChestTrack} track \n * @returns {Object} Validation result\n */\nexport function validateTrackSEO(track) {\n  const issues = [];\n  const warnings = [];\n\n  if (!track) {\n    issues.push('Track data is missing');\n    return { valid: false, issues, warnings };\n  }\n\n  // Required fields\n  if (!track.name && !track.title) {\n    issues.push('Track name/title is required');\n  }\n  \n  if (!track.authors || track.authors.length === 0) {\n    warnings.push('Track authors are missing - affects SEO');\n  }\n\n  if (!track.cover && !track.cover_url) {\n    warnings.push('Track cover image is missing - affects social sharing');\n  }\n\n  if (!track.audio && !track.audio_url) {\n    issues.push('Track audio URL is required');\n  }\n\n  // Token validation for shared tracks\n  if (track.token && track.token.length < 10) {\n    warnings.push('Share token appears to be too short');\n  }\n\n  return {\n    valid: issues.length === 0,\n    issues,\n    warnings,\n    score: Math.max(0, 100 - (issues.length * 25) - (warnings.length * 10))\n  };\n}","import * as React from 'react';\nimport Player from './Player';\n\n/**\n * PlayerProvider - Wrapper component that provides the Player with necessary dependencies\n * \n * This component expects the following props to be injected by the parent application:\n * - apiHooks: { useLazyGetTrackSourceQuery, useUpdateTrackPlayMutation }\n * - playlistActions: { reset, play, next, previous, playing }\n * - playerActions: { closePlayer, openPlayer }\n * - reduxProps: { dispatch, playlist, playerState } - Redux state and dispatch from parent\n * \n * The parent app is responsible for providing these dependencies through Redux store.\n */\nconst PlayerProvider = ({ \n  apiHooks,\n  playlistActions, \n  playerActions,\n  reduxProps,\n  ...playerProps \n}) => {\n  // Store these in a context or global scope for the Player component to access\n  if (typeof window !== 'undefined') {\n    window.__CHEST_PLAYER_DEPS__ = {\n      apiHooks,\n      playlistActions,\n      playerActions,\n      reduxProps\n    };\n  }\n\n  return <Player {...playerProps} />;\n};\n\nexport default PlayerProvider;"],"names":["useMediaQuery","query","_useState2","_slicedToArray","useState","matches","setMatches","useEffect","media","window","matchMedia","listener","addEventListener","removeEventListener","useModal","modalFileName","_window$__CHEST_PLAYE","dispatch","useDispatch","_getModalDependencies","__CHEST_PLAYER_DEPS__","modalActions","openModal","closeModal","isModalOpen","onOpen","useCallback","meta","onClose","isOpen","useSelector","state","classNames","classes","Object","keys","map","key","join","format","seconds","parseInt","minutes","Math","floor","remainingSeconds","formattedSeconds","concat","ProgressBar","_ref","_playlist$","timeProgress","duration","progressBarRef","audioRef","open","isSharedLink","playlist","token","_jsx","_Fragment","children","_jsxs","jsxs","className","jsx","type","defaultValue","step","ref","onChange","current","currentTime","value","RepeatIcon","styles","props","_objectWithoutProperties","_excluded","_objectSpread","width","height","fill","xmlns","d","NextIcon","PreviousIcon","ShuffleIcon","PlayIcon","PauseIcon","useRef","React","Controls","_playlist$4","setTimeProgress","setLoop","loop","_window$__CHEST_PLAYE2","_ref$mobileExpanded","mobileExpanded","playAnimationRef","_getPlaylistActions","playlistActions","play","console","log","next","previous","playing","toggleShuffle","playlistState","reduxProps","shuffle","context","repeat","style","setProperty","requestAnimationFrame","togglePlayPause","handleKeyDown","event","keyCode","target","tagName","preventDefault","_playlist$3","toggleLoop","prev","skipForward","skipBackward","handleToggleShuffle","handleTrackEnd","length","currentTrack","isPlaying","_playlist$2","playPromise","undefined","pause","onClick","ControlsMobile","_audioRef$current2","error","cancelAnimationFrame","_audioRef$current","src","e","stopPropagation","VolumeControls","volume","setVolume","_useState4","prevVolume","setPrevVolume","reset","volumeRef","disabled","ClockIcon","SpeakerXMarkIcon","SpeakerWaveIcon","min","max","ChevronDownIcon","Track","setDuration","handleTogglePlay","backgroundImage","cover_url","name","authors","play_limit","plays","TrackMobile","_currentTrack$authors","_currentTrack$authors2","background","Player","_playlist$6","_playlist$9","_playlist$1","_trackList$authors","deps","Error","getDependencies","_deps$apiHooks","apiHooks","useLazyGetTrackSourceQuery","useUpdateTrackPlayMutation","_deps$playlistActions","_deps$playerActions","playerActions","closePlayer","openPlayer","_deps$reduxProps","playerState","setIsCounted","_useLazyGetTrackSourc2","getTrackSource","getResult","_useUpdateTrackPlayMu2","updateTrackPlay","openLimitModal","isMobile","_useState6","_useState8","_useState0","trackList","setTrackList","_useState10","setOpen","_useState12","lastPlayed","setLastPlayed","_useState14","playCount","setPlayCount","_useState16","playLimit","setPlayLimit","_useState18","setHasEnded","_useState20","isLimitReached","setIsLimitReached","_useState22","hasDecremented","setHasDecremented","_useState24","touchStart","setTouchStart","_useState26","isSwiping","setIsSwiping","_useState28","setSwipeDistance","mobilePlayerRef","_useState30","_useState32","_useState34","setLastPlayPosition","_useState36","setSignificantPlayTime","_useState38","expandedTouchStart","setExpandedTouchStart","_useState40","expandedIsSwiping","setExpandedIsSwiping","expandedPlayerRef","track","_typeof","id","audio","url","cover","session","localStorage","getItem","then","data","storageKey","storedCount","_playlist$5","handlePlayAttempt","_playlist$7","currentPlayLimit","decrementPlayCount","_ref2","_asyncToGenerator","_regenerator","m","_callee","newPlayCount","w","_context","p","n","anonymous","v","a","apply","this","arguments","_playlist$8","_playlist$0","onLoadedMetadata","onEnded","onTimeUpdate","onPlay","_audioRef$current3","SIGNIFICANT_PLAY_PERCENTAGE","motion","div","initial","opacity","y","animate","backgroundColor","onTouchStart","touches","clientY","transition","onTouchMove","deltaY","transform","onTouchEnd","changedTouches","setTimeout","fontSize","lineHeight","aspectRatio","minHeight","backgroundSize","backgroundPosition","backgroundRepeat","borderRadius","ProgressBarMobile","clientX","distance","touchEnd","swipeDistanceEnd","abs","exit","delay","ease","SharedLinkBanner","_ref$title","title1","_ref$title2","title2","_ref$title3","title3","_ref$signUpText","signUpText","_ref$signUpUrl","signUpUrl","_ref$coverImage","coverImage","_ref$isMobile","alt","href","rel","capitalize","word","charAt","toUpperCase","slice","toLowerCase","shareTrackToChestTrack","shareTrack","generateTrackId","title","audio_url","album","version_name","generateSEOMetadata","_track$authors","coverUrl","audioUrl","description","author","image","musician","generateSocialMetadata","_track$authors2","fullTitle","ogTitle","ogDescription","ogImage","ogAudio","ogType","twitterCard","twitterTitle","twitterDescription","twitterImage","replace","Date","now","useSEOMetadata","options","_options$enabled","enabled","_options$baseTitle","baseTitle","_options$baseDescript","baseDescription","_options$siteName","siteName","seoData","useMemo","seoMetadata","socialMetadata","document","originalTags","Map","updateMetaTag","property","content","useProperty","selector","tag","querySelector","set","getAttribute","createElement","setAttribute","head","appendChild","originalTitle","forEach","originalContent","startsWith","remove","useShareMetadata","baseUrl","shareUrl","shareText","text","facebook","encodeURIComponent","twitter","whatsapp","telegram","canShare","navigator","share","nativeShare","Promise","reject","SharedLinkPage","_ref$showBanner","showBanner","_ref$showPlayer","showPlayer","_ref$PlayerComponent","PlayerComponent","_ref$playerProps","playerProps","_ref$onPlayTrack","onPlayTrack","_ref$enableSEO","enableSEO","displayBanner","setDisplayBanner","handlePlayClick","trackTitle","trackAuthors","trackCover","trackAlbum","trackVersion","_copyToClipboard","textArea","successful","_t","clipboard","writeText","position","body","focus","select","execCommand","removeChild","_ref$shareTrack","_ref$track","_ref$token","_ref$showSharePage","showSharePage","_ref$baseUrl","_ref$onTrackLoad","onTrackLoad","setCurrentTrack","isPlayerVisible","setIsPlayerVisible","transformedTrack","shareData","handlePlayTrack","trackToPlay","process","env","NODE_ENV","chestTrack","copyToClipboard","_x","_options$baseUrl","_options$description","trackAudio","filter","Boolean","byArtist","inAlbum","contentUrl","encodingFormat","publisher","potentialAction","location","structuredData","script","textContent","JSON","stringify","existing","getElementById","scriptToRemove","issues","warnings","push","valid","score"],"mappings":"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"}