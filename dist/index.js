"use strict";var e=require("react"),t=require("framer-motion"),n=require("react-redux"),r=require("react/jsx-runtime"),a=require("@heroicons/react/24/outline");function o(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var i=o(e);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){c(o,r,a,i,s,"next",e)}function s(e){c(o,r,a,i,s,"throw",e)}i(void 0)})}}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function f(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return h(l,"_invoke",function(n,r,a){var o,s,c,l=0,u=a||[],d=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,s=0,c=e,p.n=n,i}};function m(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,o=u[t],m=p.p,f=o[2];n>3?(a=f===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(s=0,p.v=r,p.n=o[1]):m<f&&(a=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,p.n=f,s=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,f){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,f),s=u,c=f;(t=s<2?e:c)||!d;){o||(s?s<3?(s>1&&(p.n=-1),m(s,c)):p.n=c:p.v=c);try{if(l=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(d=p.n<0)?c:n.call(r,p))!==i)break}catch(t){o=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,o),!0),l}var i={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(h(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,h(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,h(d,"constructor",l),h(l,"constructor",c),c.displayName="GeneratorFunction",h(l,a,"GeneratorFunction"),h(d),h(d,a,"Generator"),h(d,r,function(){return this}),h(d,"toString",function(){return"[object Generator]"}),(f=function(){return{w:o,m:p}})()}function h(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}h=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{function o(t,n){h(e,t,function(e){return this._invoke(t,n,e)})}o("next",0),o("throw",1),o("return",2)}},h(e,t,n,r)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}var g=function(t){var n=v(e.useState(!1),2),r=n[0],a=n[1];return e.useEffect(function(){var e=window.matchMedia(t);e.matches!==r&&a(e.matches);var n=function(){return a(e.matches)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}},[r,t]),r};function y(t){var r,a=n.useDispatch(),o="undefined"!=typeof window&&null!==(r=window.__CHEST_PLAYER_DEPS__)&&void 0!==r&&r.modalActions?window.__CHEST_PLAYER_DEPS__.modalActions:{openModal:function(){},closeModal:function(){},isModalOpen:function(){return!1}},i=o.openModal,s=o.closeModal,c=o.isModalOpen,l=e.useCallback(function(e){return a(i(t,e))},[a,i,t]),u=e.useCallback(function(){return a(s(t))},[a,s,t]);return{isOpen:n.useSelector(function(e){return c(e,t)}),onOpen:l,onClose:u}}function b(e){return Object.keys(e).map(function(t){return!0===e[t]?t:""}).join(" ")}var j=function(e){if(!e)return"0:00";"string"==typeof e&&(e=parseInt(e));var t=Math.floor(e/60),n=Math.floor(e%60),r=n<10?"0".concat(n):n;return"".concat(t,":").concat(r)};function w(e){var t,n=e.timeProgress,a=e.duration,o=e.progressBarRef,i=e.audioRef;e.open;var s=!(null===(t=e.playlist[0])||void 0===t||!t.token);return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"w-full flex items-center gap-1.5 player-progressbar",children:[r.jsx("div",{className:"text-sm",children:j(n)}),r.jsx("input",{type:"range",defaultValue:0,step:.05,className:"bg-neutral-black rounded-lg h-1.5 appearance-none ".concat(s?"pointer-events-none":""),ref:o,onChange:function(){s||i.current&&o.current&&(i.current.currentTime=o.current.value)}}),r.jsx("div",{className:"text-sm",children:j(a)})]})})}function _(e){var t,n=e.timeProgress,a=e.duration,o=e.progressBarRef,i=e.audioRef,s=e.open,c=!(null===(t=e.playlist[0])||void 0===t||!t.token);return r.jsx(r.Fragment,{children:r.jsxs("div",{className:b({"w-full flex items-center player-progressbar":!0,"flex-col gap-2":s,"gap-1.5":!s}),children:[r.jsx("input",{type:"range",defaultValue:0,step:.05,className:b({"bg-neutral-black rounded-lg appearance-none":!0,"h-1.5":s,"h-[3px]":!s,"pointer-events-none":c}),ref:o,onChange:function(){c||i.current&&o.current&&(i.current.currentTime=o.current.value)}}),s&&r.jsxs("div",{className:"grid grid-cols-2 w-full",children:[r.jsx("div",{className:"text-sm",children:j(n)}),r.jsx("div",{className:"text-sm text-right text-neutral-silver-200",children:j(a)})]})]})})}var N=["styles"],k=function(e){e.styles;var t=m(e,N);return r.jsx("svg",p(p({width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:r.jsx("path",{d:"M1.668 10.001a5.776 5.776 0 011.634-4.028 5.513 5.513 0 013.936-1.672h7.255l-.257-.262a.902.902 0 01-.258-.637.92.92 0 01.258-.638.88.88 0 01.623-.264.863.863 0 01.623.264l1.759 1.8a.901.901 0 01.258.637.918.918 0 01-.258.638l-1.76 1.8a.876.876 0 01-1.245 0A.901.901 0 0113.977 7a.918.918 0 01.26-.637l.256-.263H7.238c-1.011 0-1.98.411-2.695 1.143A3.947 3.947 0 003.427 10a.91.91 0 01-.258.637.87.87 0 01-1.243 0A.91.91 0 011.668 10zm14.95-.9a.87.87 0 00-.622.264.91.91 0 00-.258.636 3.98 3.98 0 01-.29 1.493 3.907 3.907 0 01-.826 1.265c-.354.362-.774.65-1.236.845a3.735 3.735 0 01-1.458.297H4.673l.256-.262a.912.912 0 000-1.275.87.87 0 00-1.246 0l-1.758 1.8a.902.902 0 00-.259.637.918.918 0 00.259.637l1.758 1.8a.877.877 0 001.246 0 .901.901 0 00.259-.637.918.918 0 00-.259-.638l-.256-.262h7.255a5.513 5.513 0 003.936-1.672 5.776 5.776 0 001.633-4.028.91.91 0 00-.257-.636.87.87 0 00-.622-.264z",fill:"#C4C9CF"})}))},P=["styles"],C=function(e){e.styles;var t=m(e,P);return r.jsx("svg",p(p({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:r.jsx("path",{d:"M6.107 18.224l7.693-5.18a1.24 1.24 0 000-2.075L6.107 5.776C5.213 5.191 4 5.79 4 6.82v10.36c0 1.03 1.213 1.63 2.107 1.044zM17.333 6.273v11.454c0 .7.6 1.273 1.334 1.273C19.4 19 20 18.427 20 17.727V6.273C20 5.573 19.4 5 18.667 5c-.734 0-1.334.573-1.334 1.273z",fill:"#C4C9CF"})}))},S=["styles"],E=function(e){e.styles;var t=m(e,S);return r.jsx("svg",p(p({width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:r.jsx("path",{d:"M17.893 18.224l-7.693-5.18a1.24 1.24 0 010-2.075l7.693-5.193C18.787 5.191 20 5.79 20 6.82v10.36c0 1.03-1.213 1.63-2.107 1.044zM6.667 6.273v11.454c0 .7-.6 1.273-1.334 1.273C4.6 19 4 18.427 4 17.727V6.273C4 5.573 4.6 5 5.333 5c.734 0 1.334.573 1.334 1.273z",fill:"#C4C9CF"})}))},T=["styles"],A=function(e){e.styles;var t=m(e,T);return r.jsx("svg",p(p({width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:r.jsx("path",{d:"M18.79 13.71a.937.937 0 010 1.329l-1.876 1.875a.945.945 0 01-1.532-.305.938.938 0 01.204-1.023l.273-.274h-2.414a1.571 1.571 0 01-1.273-.656L6.39 6.562H2.5a.938.938 0 110-1.875h4.055a1.57 1.57 0 011.273.656l5.781 8.094h2.25l-.273-.273a.94.94 0 011.328-1.328l1.875 1.875zM8.624 11.922a.938.938 0 00-1.305.22l-.93 1.296H2.5a.937.937 0 100 1.875h4.055a1.571 1.571 0 001.273-.656l1.016-1.422a.945.945 0 00-.219-1.313zm2.75-3.843a.937.937 0 001.305-.219l.93-1.297h2.25l-.274.274a.937.937 0 00.664 1.6.946.946 0 00.664-.272l1.875-1.875a.937.937 0 000-1.328l-1.875-1.875a.94.94 0 00-1.328 1.328l.273.273h-2.414a1.57 1.57 0 00-1.273.656l-1.016 1.422a.945.945 0 00.219 1.313z",fill:"#C4C9CF"})}))},R=["styles"],O=function(e){e.styles;var t=m(e,R);return r.jsx("svg",p(p({width:"40",height:"40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:r.jsx("path",{d:"M8.333 31.394V8.606a1.667 1.667 0 012.449-1.472L32.23 18.528c1.18.627 1.18 2.317 0 2.944L10.782 32.866a1.667 1.667 0 01-2.449-1.472z",fill:"#fff"})}))},M=["styles"],L=function(e){e.styles;var t=m(e,M);return r.jsx("svg",p(p({width:"40",height:"40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:r.jsx("path",{d:"M10 10c0-.92.746-1.666 1.667-1.666H15c.92 0 1.667.746 1.667 1.667v20c0 .92-.747 1.666-1.667 1.666h-3.333c-.92 0-1.667-.746-1.667-1.666V10zm13.333 0c0-.92.747-1.666 1.667-1.666h3.333c.92 0 1.667.746 1.667 1.667v20c0 .92-.746 1.666-1.667 1.666H25c-.92 0-1.667-.746-1.667-1.666V10z",fill:"#fff"})}))},D=i.useRef,I=i.useCallback,z=i.useEffect;function F(e){var t,n=e.audioRef,a=e.progressBarRef,o=e.duration,i=e.setTimeProgress,s=e.setLoop,c=e.loop;e.dispatch;var l,u,d=e.playlist,m=e.mobileExpanded,f=void 0!==m&&m,h=D(),v="undefined"!=typeof window&&null!==(l=window.__CHEST_PLAYER_DEPS__)&&void 0!==l&&l.playlistActions?window.__CHEST_PLAYER_DEPS__.playlistActions:{play:function(){return console.log("Play action not injected")},next:function(){return console.log("Next action not injected")},previous:function(){return console.log("Previous action not injected")},playing:function(){return console.log("Playing action not injected")},toggleShuffle:function(){return console.log("ToggleShuffle action not injected")}},x=v.play,g=v.next,y=v.previous,b=v.playing,j=v.toggleShuffle,w="undefined"!=typeof window&&null!==(u=window.__CHEST_PLAYER_DEPS__)&&void 0!==u&&null!==(u=u.reduxProps)&&void 0!==u&&u.playlistState?window.__CHEST_PLAYER_DEPS__.reduxProps.playlistState:{shuffle:!1,context:"my-chest"},_=I(function(){if(n.current&&a.current){var e=n.current.currentTime,t=n.current.duration;i(e),a.current.value=e,a.current.style.setProperty("--range-progress","".concat(a.current.value/t*100,"%")),h.current=requestAnimationFrame(_)}},[n,o,a,i]),N=function(){x()};z(function(){var e=function(e){32===e.keyCode&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&(e.preventDefault(),x())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[x]);var P,S=function(){s(function(e){return!e})},T=function(){g()},R=function(){y()},M=function(){j()},F=function(){var e;if(null===(e=d[0])||void 0===e||!e.token)if(d.length>1)g();else{n.current&&(n.current.currentTime=0);var t=d[0];b(p(p({},t),{},{isPlaying:!1}))}};return z(function(){return n.current&&n.current.addEventListener("ended",F),function(){n.current&&n.current.removeEventListener("ended",F)}},[n.current,d]),z(function(){var e;if(null!==(e=d[0])&&void 0!==e&&e.isPlaying){var t=n.current.play();void 0!==t&&t.catch(function(){n.current.pause()})}else n.current.pause();n.current.loop=!!c,h.current=requestAnimationFrame(_)},[c,n,_,d]),f?r.jsxs("div",{className:"w-full px-4 flex items-center justify-between",children:[r.jsx("button",{type:"button",className:"".concat(w.shuffle?"player-controls-active":"player-controls"),onClick:M,children:r.jsx(A,{width:20,height:20})}),r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx("button",{type:"button",onClick:R,className:"text-neutral-silver-200 hover:text-white",children:r.jsx(E,{width:24,height:24})}),r.jsx("button",{type:"button",onClick:N,className:"text-white hover:scale-105 transition-transform",children:null!==(P=d[0])&&void 0!==P&&P.isPlaying?r.jsx(L,{width:34,height:34}):r.jsx(O,{width:34,height:34})}),r.jsx("button",{type:"button",onClick:T,className:"text-neutral-silver-200 hover:text-white",children:r.jsx(C,{width:24,height:24})})]}),r.jsx("button",{type:"button",className:"".concat(c?"player-controls-active":"player-controls"),onClick:S,children:r.jsx(k,{width:20,height:20})})]}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{type:"button",className:"p-2 mr-2 ".concat(w.shuffle?"player-controls-active":"player-controls"),onClick:M,children:r.jsx(A,{})}),r.jsx("button",{type:"button",onClick:R,className:"p-2 player-controls",children:r.jsx(E,{})}),r.jsx("button",{type:"button",onClick:N,className:"player-controls",children:null!==(t=d[0])&&void 0!==t&&t.isPlaying?r.jsx(L,{width:40,height:40}):r.jsx(O,{width:40,height:40})}),r.jsx("button",{type:"button",onClick:T,className:"p-2 player-controls",children:r.jsx(C,{})}),r.jsx("button",{type:"button",className:"p-2 ml-2 ".concat(c?"player-controls-active":"player-controls"),onClick:S,children:r.jsx(k,{})})]})})}var H=i.useRef,B=i.useCallback,U=i.useEffect;function Y(e){var t,n,a,o=e.audioRef,i=e.progressBarRef;e.duration;var s=e.setTimeProgress;e.setLoop,e.loop,e.dispatch;var c,l=e.playlist,u=H(),d="undefined"!=typeof window&&null!==(c=window.__CHEST_PLAYER_DEPS__)&&void 0!==c&&c.playlistActions?window.__CHEST_PLAYER_DEPS__.playlistActions:{play:function(){},playing:function(){}},p=d.play;d.playing;var m=B(function(){if(o.current&&i.current)try{var e=o.current.currentTime,t=o.current.duration;s(e),i.current&&(i.current.value=e,i.current.style.setProperty("--range-progress","".concat(i.current.value/t*100,"%"))),u.current=requestAnimationFrame(m)}catch(e){cancelAnimationFrame(u.current)}},[o,i,s]);return U(function(){var e;if(null!==(e=o.current)&&void 0!==e&&e.src)return u.current=requestAnimationFrame(m),function(){u.current&&cancelAnimationFrame(u.current)}},[m,null===(t=o.current)||void 0===t?void 0:t.src]),U(function(){var e,t;if(null!==(e=l[0])&&void 0!==e&&e.isPlaying&&o.current){var n=o.current.play();void 0!==n&&n.catch(function(){o.current.pause()})}else null!==(t=l[0])&&void 0!==t&&t.isPlaying||!o.current||o.current.pause();u.current=requestAnimationFrame(m)},[null===(n=l[0])||void 0===n?void 0:n.isPlaying,o,m]),r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex items-center",children:r.jsx("button",{type:"button",onClick:function(e){e.stopPropagation(),p()},className:"player-controls",children:null!==(a=l[0])&&void 0!==a&&a.isPlaying?r.jsx(L,{width:40,height:40}):r.jsx(O,{width:40,height:40})})})})}var q=i.useEffect,V=i.useRef,G=i.useState;function X(e){var t=e.audioRef;e.dispatch;var n,o=v(G(50),2),i=o[0],s=o[1],c=v(G(0),2),l=c[0],u=c[1],d=("undefined"!=typeof window&&null!==(n=window.__CHEST_PLAYER_DEPS__)&&void 0!==n&&n.playlistActions?window.__CHEST_PLAYER_DEPS__.playlistActions:{reset:function(){return console.log("Reset action not injected")}}).reset,p=V();return q(function(){p.current.style.setProperty("--range-progress","".concat(p.current.value,"%")),t&&(t.current.volume=i/100)},[i,t]),r.jsx(r.Fragment,{children:r.jsxs("div",{className:"flex items-center justify-end player-volume",children:[r.jsx("button",{type:"button",className:"p-2 disabled:opacity-30",disabled:!0,children:r.jsx(a.ClockIcon,{className:"h-6 w-6 text-neutral-silver-200"})}),r.jsx("button",{type:"button",className:"p-2",onClick:function(){i>0?(u(i),s(0)):s(l)},children:0===i?r.jsx(a.SpeakerXMarkIcon,{className:"h-6 w-6 text-neutral-silver-200"}):r.jsx(a.SpeakerWaveIcon,{className:"h-6 w-6 text-neutral-silver-200"})}),r.jsx("input",{ref:p,type:"range",value:i,min:0,max:100,className:"bg-neutral-black rounded-lg h-1.5 appearance-none mr-4",onChange:function(e){s(parseInt(e.target.value))}}),r.jsx("button",{type:"button",className:"p-2 test",onClick:function(){d()},children:r.jsx(a.ChevronDownIcon,{className:"h-6 w-6 text-white"})})]})})}var W=i.useCallback;function Q(e){var t,n=e.currentTrack;e.audioRef,e.setDuration,e.progressBarRef;var a=e.dispatch,o=!(null===(t=e.playlist[0])||void 0===t||!t.token),i=W(function(){n&&a(void p(p({},n),{},{isPlaying:!n.isPlaying}))},[n,a]);return r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{className:"flex gap-4 items-center",children:[r.jsx("div",{className:"w-[52px] h-[52px] bg-cover rounded cursor-pointer",style:{backgroundImage:"url(".concat(n.cover_url||"https://cdn.chestmusic.com/cover-default.jpg",")")},onClick:i}),r.jsx("div",{className:"flex flex-col gap-0.5",children:r.jsxs("div",{className:"flex flex-col grow",children:[r.jsx("div",{className:"w-full whitespace-nowrap overflow-hidden relative",children:r.jsx("span",{className:"text-sm text-white inline-block",children:n.name})}),r.jsx("span",{className:"text-sm text-neutral-silver-200",children:n.authors}),o&&n.play_limit>0&&r.jsxs("span",{className:"text-xs text-neutral-silver-300",children:[n.play_limit-n.plays," reproducciones restantes"]})]})})]})})}function J(e){var t,n,a=e.currentTrack;e.audioRef,e.setDuration,e.progressBarRef;var o=e.open;return r.jsx(r.Fragment,{children:o?r.jsx("div",{children:r.jsxs("div",{children:[r.jsx("div",{className:"flex gap-3 items-center justify-center -mb-2",children:r.jsx("div",{className:"w-[286px] h-[286px] bg-cover rounded",style:{backgroundImage:"url(".concat(a.cover_url,")")}})}),r.jsxs("div",{className:"rounded-3xl px-5 pt-2 backdrop-blur-xl flex flex-col gap-1 items-center justify-center h-[160px]",style:{background:"rgba(67, 71, 79, 0.30)"},children:[r.jsx("span",{className:"font-thunder-bold text-4xl uppercase !text-center",children:a.name}),r.jsx("span",{className:"text-neutral-silver-200",children:null==a||null===(t=a.authors)||void 0===t?void 0:t.join(", ")})]})]})}):r.jsx("div",{className:"flex items-center grow min-w-0",children:r.jsxs("div",{className:"flex gap-3 items-center min-w-0 flex-1",children:[r.jsx("div",{className:"w-10 h-10 bg-cover rounded min-w-[40px] flex-shrink-0",style:{backgroundImage:"url(".concat(a.cover_url||"https://cdn.chestmusic.com/cover-default.jpg",")")}}),r.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[r.jsx("div",{className:"w-full truncate",children:r.jsx("span",{className:"text-sm text-white truncate",children:a.name})}),r.jsx("span",{className:"text-sm text-neutral-silver-200 truncate",children:null==a||null===(n=a.authors)||void 0===n?void 0:n.join(", ")})]})]})})})}var $=i.useEffect,K=i.useRef,Z=i.useState,ee=i.useCallback;function te(){var e,n,a,o,i,s,c=function(){if("undefined"!=typeof window&&window.__CHEST_PLAYER_DEPS__)return window.__CHEST_PLAYER_DEPS__;throw new Error("ChestPlayer: Dependencies not provided. Make sure to use PlayerProvider.")}(),u=c.apiHooks,d=u.useLazyGetTrackSourceQuery,p=u.useUpdateTrackPlayMutation,m=c.playlistActions,h=m.reset,b=m.play,j=c.playerActions,N=j.closePlayer,k=j.openPlayer,P=c.reduxProps,C=P.dispatch,S=P.playlist;P.playerState;var E=v(Z(!1),2);E[0];var T=E[1],A=v(d(),2),R=A[0],O=A[1],M=v(p(),2),L=M[0];M[1];var D=y("PlayLimitModal").onOpen,I=g("(max-width: 768px)"),z=v(Z(!1),2),H=z[0],B=z[1],U=v(Z(0),2),q=U[0],V=U[1],G=v(Z(0),2),W=G[0],te=G[1],ne=v(Z(),2),re=ne[0],ae=ne[1],oe=v(Z(!1),2),ie=oe[0],se=oe[1],ce=v(Z(),2),le=ce[0],ue=ce[1],de=v(Z(0),2),pe=de[0],me=de[1],fe=v(Z(null),2),he=fe[0],ve=fe[1],xe=v(Z(!1),2);xe[0];var ge=xe[1],ye=v(Z(!1),2),be=ye[0],je=ye[1],we=v(Z(!1),2),_e=we[0],Ne=we[1],ke=v(Z(0),2),Pe=ke[0],Ce=ke[1],Se=v(Z(!1),2),Ee=Se[0],Te=Se[1],Ae=v(Z(0),2);Ae[0];var Re=Ae[1],Oe=K(),Me=K(),Le=K(),De=!(null===(e=S[0])||void 0===e||!e.token),Ie=v(Z(null),2);Ie[0],Ie[1];var ze=v(Z(!1),2);ze[0],ze[1];var Fe=v(Z(0),2);Fe[0];var He=Fe[1],Be=v(Z(!1),2);Be[0];var Ue=Be[1],Ye=v(Z(0),2),qe=Ye[0],Ve=Ye[1],Ge=v(Z(!1),2),Xe=Ge[0],We=Ge[1],Qe=K();$(function(){C(ie?k():N())},[ie]),$(function(){h()},[]),$(function(){var e=re,t=S&&S[0];if(t){if("object"===x(e)&&e.id===t.id)return;if(T(!1),me(t.plays||0),ve(t.play_limit||null),Ne(!1),t.audio)ae({url:t.audio,cover_url:t.cover||"https://cdn.chestmusic.com/cover-default.jpg",name:t.name,authors:t.authors,type:t.type,id:t.id,plays:t.plays,play_limit:t.play_limit});else{var n=localStorage.getItem("chestmusic_session_id");R({id:t.id,session:n}).then(function(e){var n=e.data;n&&ae({url:n.url,cover_url:t.cover||"https://cdn.chestmusic.com/cover-default.jpg",name:t.name,authors:t.authors,type:t.type,id:t.id,plays:t.plays,play_limit:t.play_limit})})}}},[S,O]),$(function(){re?le!==re.id&&ue(re.id):ue("")},[re]),ee(function(){var e;if(De&&null!=re&&re.id&&null!==(e=S[0])&&void 0!==e&&e.token){var t="plays_".concat(re.id,"_").concat(S[0].token),n=localStorage.getItem(t);return n?parseInt(n):0}return 0},[De,null==re?void 0:re.id,null===(n=S[0])||void 0===n?void 0:n.token]),$(function(){var e,t;De&&null!=re&&re.id&&null!==(e=S[0])&&void 0!==e&&e.token&&(me(re.plays||0),(re.plays||0)>((null===(t=S[0])||void 0===t?void 0:t.play_limit)||0)&&(je(!0),Oe.current&&Oe.current.pause()))},[De,null==re?void 0:re.id,null===(a=S[0])||void 0===a?void 0:a.token,null==re?void 0:re.plays]);var Je=function(){if(De){var e,t,n=null===(e=S[0])||void 0===e?void 0:e.play_limit;if(n)if(pe>n||pe>=n&&_e)return null===(t=Oe.current)||void 0===t||t.pause(),D(),!1}return!0},$e=function(){var e=l(f().m(function e(){var t;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!De||be){e.n=4;break}return e.p=1,e.n=2,L({id:re.id,anonymous:!0,token:S[0].token});case 2:me(t=pe+1),t>he&&(je(!0),D(),Oe.current&&Oe.current.pause()),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();return $(function(){var e;if(re&&null!==(e=S[0])&&void 0!==e&&e.isPlaying){if(!Je())return void C(b());if(Oe.current){var t=Oe.current.play();void 0!==t&&t.catch(function(e){})}}},[re,null===(o=S[0])||void 0===o?void 0:o.isPlaying]),$(function(){var e;(null===(e=S[0])||void 0===e?void 0:e.id)!==le&&(ge(!1),Ue(!1),He(0),Ne(!1))},[null===(i=S[0])||void 0===i?void 0:i.id]),r.jsx(r.Fragment,{children:re&&S.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("audio",{src:re.url,ref:Oe,onLoadedMetadata:function(){var e=Oe.current.duration;te(e),Me.current&&(Me.current.max=e)},onEnded:function(){ge(!0),Ue(!1),He(0),Ne(!1)},onTimeUpdate:function(){if(Oe.current){var e=Oe.current.currentTime;e>.15*W&&Ue(!0),He(e),V(e)}},onPlay:function(){var e,t;Je()?((null===(e=Oe.current)||void 0===e?void 0:e.currentTime)||0)<.15*W&&!_e&&(Ue(!1),$e(),Ne(!0)):null===(t=Oe.current)||void 0===t||t.pause()}}),De&&null!==he&&he>0&&r.jsx("div",{className:"fixed bottom-[102px] right-0 left-0 inset-x-0 max-w-max mx-auto z-50",children:r.jsxs(t.motion.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},className:"px-6 py-3 bg-neutral-silver-600 rounded-t-xl",children:[r.jsx("span",{className:"text-brand-gold",children:Math.max(0,he-pe)})," of ",he," plays remaining"]})}),I?r.jsx(r.Fragment,{children:r.jsx("div",{className:"".concat(ie?"audio-player-mobile-open":"audio-player-mobile"),children:ie?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute top-0 left-0 w-screen h-screen",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"}}),r.jsx("div",{ref:Qe,className:"relative z-50 backdrop-blur-md rounded-2xl m-4 flex flex-col w-full max-w-sm bg-black",onTouchStart:function(e){Ve(e.touches[0].clientY),We(!0),Qe.current&&(Qe.current.style.transition="none")},onTouchMove:function(e){if(qe&&Xe){var t=e.touches[0].clientY-qe;t>0&&Qe.current&&(Qe.current.style.transform="translateY(".concat(t,"px)"),Qe.current.style.opacity=Math.max(.3,1-t/300))}},onTouchEnd:function(e){if(qe&&Xe){var t=e.changedTouches[0].clientY-qe;Qe.current&&(Qe.current.style.transition="transform 0.3s ease-out, opacity 0.3s ease-out",t>150?(Qe.current.style.transform="translateY(100vh)",Qe.current.style.opacity="0",setTimeout(function(){se(!1),Qe.current&&(Qe.current.style.transform="translateY(0)",Qe.current.style.opacity="1",Qe.current.style.transition="")},300)):(Qe.current.style.transform="translateY(0)",Qe.current.style.opacity="1",setTimeout(function(){Qe.current&&(Qe.current.style.transition="")},300))),Ve(0),We(!1)}},children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-4",children:[r.jsx("div",{className:"text-center mb-2",children:r.jsx("span",{className:"font-thunder-bold text-white text-center block",style:{fontSize:"32px",lineHeight:"1.1"},children:re.name})}),r.jsx("div",{className:"text-center mb-4",children:r.jsx("span",{className:"text-neutral-silver-200",style:{fontSize:"16px"},children:null==re||null===(s=re.authors)||void 0===s?void 0:s.join(", ")})}),r.jsx("div",{className:"mb-8 w-full px-4",children:r.jsx("div",{className:"w-full shadow-2xl max-w-sm mx-auto",style:{aspectRatio:"1",minHeight:"200px",backgroundImage:"url(".concat(re.cover_url||"https://cdn.chestmusic.com/cover-default.jpg",")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"11px"}})}),r.jsx("div",{className:"w-full px-4 mb-4",children:r.jsx(_,{progressBarRef:Me,audioRef:Oe,timeProgress:q,duration:W,open:ie,playlist:S})}),r.jsx(F,{audioRef:Oe,progressBarRef:Me,duration:W,setTimeProgress:V,setLoop:B,loop:H,dispatch:C,playlist:S,mobileExpanded:!0})]})})]}):r.jsxs("div",{ref:Le,className:"flex flex-row min-w-0 w-full ".concat(Ee?"swiping":""),onClick:function(){se(function(e){return!e})},onTouchStart:function(e){Ce(e.touches[0].clientX),Te(!1),Re(0)},onTouchMove:function(e){if(Pe){var t=e.touches[0].clientX-Pe;Te(!0),Re(t),Le.current&&Le.current.style.setProperty("--swipe-distance","".concat(t,"px"))}},onTouchEnd:function(e){if(Pe){var t=e.changedTouches[0].clientX,n=Math.abs(Pe-t);Te(!1),Re(0),Le.current&&Le.current.style.setProperty("--swipe-distance","0px"),n>100&&C(N()),Ce(0)}},children:[r.jsx(J,{currentTrack:re,audioRef:Oe,setDuration:te,progressBarRef:Me,dispatch:C,playlist:S}),r.jsx(Y,{audioRef:Oe,progressBarRef:Me,duration:W,setTimeProgress:V,setLoop:B,loop:H,dispatch:C,playlist:S})]})})}):r.jsxs(t.motion.div,{className:"audio-player",initial:{height:0},animate:{height:"auto"},exit:{height:0,transition:{delay:.7,duration:1,ease:"easeIn"}},children:[r.jsx(Q,{currentTrack:re,audioRef:Oe,setDuration:te,progressBarRef:Me,dispatch:C,playlist:S}),r.jsxs("div",{className:"grow flex flex-col items-center justify-center gap-1.5",children:[r.jsx(F,{audioRef:Oe,progressBarRef:Me,duration:W,setTimeProgress:V,setLoop:B,loop:H,dispatch:C,playlist:S}),r.jsx(w,{progressBarRef:Me,audioRef:Oe,timeProgress:q,duration:W,playlist:S})]}),r.jsx(X,{audioRef:Oe,dispatch:C})]})]})})}var ne=["apiHooks","playlistActions","playerActions","reduxProps"];function re(e){var t=e.title1,n=void 0===t?"Sube tus":t,a=e.title2,o=void 0===a?"maquetas y":a,i=e.title3,s=void 0===i?"compártelas":i,c=e.signUpText,l=void 0===c?"Regístrate":c,u=e.signUpUrl,d=void 0===u?"https://chestmusic.com":u,p=e.coverImage,m=void 0===p?"/assets/images/cover-track.png":p,f=e.isMobile;return void 0!==f&&f?r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"bg-neutral-black p-6 rounded-2xl",children:r.jsxs("div",{className:"flex flex-col gap-4 text-center",children:[r.jsxs("h3",{className:"text-2xl font-thunder-bold text-neutral-silver-200 leading-tight",children:[n," ",r.jsx("br",{}),o," ",r.jsx("br",{}),s]}),r.jsx("div",{className:"flex justify-center",children:r.jsx("img",{src:m,alt:"cover",className:"w-48 h-24 rounded-lg object-cover"})}),r.jsx("div",{className:"w-full",children:r.jsx("a",{href:d,className:"btn btn-primary w-full text-center block py-3 px-6 bg-brand-gold text-neutral-black font-semibold rounded-lg hover:bg-brand-gold-hover transition-colors",target:"_blank",rel:"noopener noreferrer",children:l})})]})})}):r.jsx("div",{className:"pt-5 pb-20",children:r.jsxs("div",{className:"p-10 bg-neutral-black flex gap-x-20 rounded-2xl",children:[r.jsxs("div",{className:"w-2/4 h-full flex flex-col gap-y-6",children:[r.jsxs("h3",{className:"text-[64px] font-thunder-bold pr-10 leading-[58px] text-neutral-silver-200",children:[n," ",r.jsx("br",{}),o," ",r.jsx("br",{}),s]}),r.jsx("div",{className:"w-1/3",children:r.jsx("a",{href:d,className:"btn btn-primary inline-block py-3 px-6 bg-brand-gold text-neutral-black font-semibold rounded-lg hover:bg-brand-gold-hover transition-colors",target:"_blank",rel:"noopener noreferrer",children:l})})]}),r.jsx("div",{className:"w-2/4",children:r.jsx("img",{src:m,alt:"cover",className:"w-[620px] h-[300px] rounded-lg object-cover"})})]})})}var ae=i.useState,oe=i.useEffect;function ie(e){var t,n=e.track,a=e.showBanner,o=void 0===a||a,i=e.showPlayer,s=void 0!==i&&i,c=e.PlayerComponent,l=void 0===c?null:c,u=e.playerProps,d=void 0===u?{}:u,m=e.onPlayTrack,f=void 0===m?null:m,h=v(ae(!1),2),x=h[0],y=h[1];g("(max-width: 768px)"),oe(function(){y(!0)},[]);var b=function(){f&&"function"==typeof f&&f(n)};if(!n)return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-thunder-bold mb-4",children:"Track no encontrado"}),r.jsx("p",{className:"text-neutral-silver-200",children:"El enlace compartido no es válido o ha expirado."})]})});var j=n.title||n.name,w=(null===(t=n.authors)||void 0===t?void 0:t.join(", "))||"",_=n.cover_url||n.cover||"https://cdn.chestmusic.com/cover-default.jpg",N=n.album||"",k=n.version_name||"";return r.jsxs("main",{className:"min-h-screen w-full relative",children:[r.jsxs("div",{className:"hidden lg:block lg:container mx-auto px-4 pt-[50px]",children:[r.jsxs("div",{className:"lg:pt-[60px] lg:pb-[40px] flex lg:gap-x-12 items-center",children:[r.jsx("div",{children:r.jsx("img",{src:_,className:"lg:w-[220px] lg:h-[220px] lg:rounded-lg object-cover",alt:"Cover for ".concat(j)})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"lg:mb-6",children:r.jsxs("p",{className:"text-left text-neutral-silver-200 text-base flex items-center gap-2",children:[N,N&&k&&r.jsxs(r.Fragment,{children:[r.jsx("img",{src:"/assets/images/icon-rectangle.png",alt:"separator",className:"h-[3px]"}),k]})]})}),r.jsx("div",{className:"lg:mb-3",children:r.jsx("h2",{className:"lg:text-[76px] leading-[68px] font-thunder-bold",children:j})}),r.jsx("div",{className:"lg:mb-6",children:r.jsx("p",{className:"text-left lg:text-[22px] capitalize",children:w})}),f&&r.jsx("div",{className:"lg:mb-4",children:r.jsx("button",{onClick:b,className:"btn btn-primary py-3 px-8 bg-brand-gold text-neutral-black font-semibold rounded-lg hover:bg-brand-gold-hover transition-colors",children:"▶ Reproducir"})})]})]}),s&&l&&r.jsx("div",{className:"lg:mb-8",children:r.jsx(l,p({},d))}),x&&o&&r.jsx(re,{isMobile:!1})]}),r.jsxs("div",{className:"p-3 h-screen bg-neutral-black lg:hidden pt-[50px]",children:[r.jsxs("div",{className:"w-full h-[510px] bg-neutral-silver-700 rounded-3xl py-2",children:[r.jsx("div",{className:"mb-5 py-2 pt-4",children:r.jsxs("p",{className:"font-semibold text-center text-neutral-silver-200",children:[N," ",k&&"• ".concat(k)]})}),r.jsx("div",{className:"flex justify-center",children:r.jsx("img",{src:_,alt:"Cover for ".concat(j),className:"w-[286px] h-[286px] rounded-md object-cover"})}),r.jsxs("div",{className:"h-[160px] rounded-[20px] px-5 py-2 w-full bg-custom-opacity flex flex-col justify-center items-center",children:[r.jsx("h5",{className:"uppercase font-thunder-bold text-[36px] leading-[32px] text-center",children:j}),r.jsx("p",{className:"text-base text-neutral-silver-200 capitalize text-center mb-4",children:w}),f&&r.jsx("button",{onClick:b,className:"btn btn-primary py-2 px-6 bg-brand-gold text-neutral-black font-semibold rounded-lg hover:bg-brand-gold-hover transition-colors",children:"▶ Reproducir"})]})]}),s&&l&&r.jsx("div",{className:"mt-4",children:r.jsx(l,p({},d))}),x&&o&&r.jsx(re,{isMobile:!0})]})]})}function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{id:t||ue(e),name:e.title,title:e.title,authors:e.authors,cover:e.cover_url,cover_url:e.cover_url,audio:e.audio_url,audio_url:e.audio_url,album:e.album,version_name:e.version_name,token:t,isPlaying:!1,plays:0,play_limit:null,type:"shared"}}function ce(e){var t,n=e.title||e.name,r=(null===(t=e.authors)||void 0===t?void 0:t.join(", "))||"",a=e.cover_url||e.cover||"https://cdn.chestmusic.com/cover-default.jpg",o=e.audio_url||e.audio||"";return{title:"".concat(de(n)," - ").concat(r),description:"Chest - El hogar de tus maquetas",author:r,image:a,audio:o,type:"music.song",musician:r,album:e.album||""}}function le(e){var t,n=e.title||e.name,r=(null===(t=e.authors)||void 0===t?void 0:t.join(", "))||"",a=e.cover_url||e.cover||"https://cdn.chestmusic.com/cover-default.jpg",o=e.audio_url||e.audio||"",i="".concat(de(n)," - ").concat(r),s="Chest - El hogar de tus maquetas";return{ogTitle:i,ogDescription:s,ogImage:a,ogAudio:o,ogType:"music.song",twitterCard:"summary_large_image",twitterTitle:i,twitterDescription:s,twitterImage:a}}function ue(e){return"share_".concat(e.title.toLowerCase().replace(/\s+/g,"_"),"_").concat(Date.now())}function de(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}function pe(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enabled,a=void 0===r||r,o=n.baseTitle,i=void 0===o?"":o,s=n.baseDescription,c=void 0===s?"Chest - El hogar de tus maquetas":s,l=n.siteName,u=void 0===l?"Chest Music":l,d=e.useMemo(function(){if(!t||!a)return null;var e=ce(t),n=le(t);return p(p(p({},e),n),{},{siteName:u,baseTitle:i,baseDescription:c})},[t,a,i,c,u]);return e.useEffect(function(){if(d&&"undefined"!=typeof document){var e=new Map,t=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var a=r?'meta[property="'.concat(t,'"]'):'meta[name="'.concat(t,'"]'),o=document.querySelector(a);o?e.set(t,o.getAttribute("content")):(o=document.createElement("meta"),r?o.setAttribute("property",t):o.setAttribute("name",t),document.head.appendChild(o),e.set(t,null)),o.setAttribute("content",n)}},n=document.title;return d.title&&(document.title=d.title),t("description",d.description),t("author",d.author),t("og:title",d.ogTitle,!0),t("og:description",d.ogDescription,!0),t("og:image",d.ogImage,!0),t("og:type",d.ogType,!0),t("og:site_name",u,!0),d.ogAudio&&(t("og:audio",d.ogAudio,!0),t("og:audio:type","audio/mpeg",!0)),d.musician&&t("music:musician",d.musician,!0),d.album&&t("music:album",d.album,!0),t("twitter:card",d.twitterCard),t("twitter:title",d.twitterTitle),t("twitter:description",d.twitterDescription),t("twitter:image",d.twitterImage),function(){document.title=n,e.forEach(function(e,t){var n=t.startsWith("og:")||t.startsWith("music:")?'meta[property="'.concat(t,'"]'):'meta[name="'.concat(t,'"]'),r=document.querySelector(n);r&&(null===e?r.remove():r.setAttribute("content",e))})}}},[d]),d}function me(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=pe(t,{enabled:!1});return e.useMemo(function(){if(!t||!r)return null;var e=t.token?"".concat(n,"/shared-link/").concat(t.token):"",a='Escucha "'.concat(r.title,'" en Chest Music');return{url:e,title:r.title,text:a,image:r.ogImage,facebook:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(e)),twitter:"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(a),"&url=").concat(encodeURIComponent(e)),whatsapp:"https://wa.me/?text=".concat(encodeURIComponent("".concat(a," ").concat(e))),telegram:"https://t.me/share/url?url=".concat(encodeURIComponent(e),"&text=").concat(encodeURIComponent(a)),canShare:"undefined"!=typeof navigator&&navigator.share,nativeShare:function(){return"undefined"!=typeof navigator&&navigator.share?navigator.share({title:r.title,text:a,url:e}):Promise.reject(new Error("Native sharing not supported"))}}},[t,r,n])}var fe=i.useState,he=i.useEffect,ve=i.useCallback;function xe(){return(xe=l(f().m(function e(t){var n,r,a;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if("undefined"!=typeof navigator){e.n=1;break}return e.a(2,!1);case 1:if(e.p=1,!navigator.clipboard){e.n=3;break}return e.n=2,navigator.clipboard.writeText(t);case 2:return e.a(2,!0);case 3:return(n=document.createElement("textarea")).value=t,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.focus(),n.select(),r=document.execCommand("copy"),document.body.removeChild(n),e.a(2,r);case 4:e.n=6;break;case 5:return e.p=5,a=e.v,console.error("Failed to copy to clipboard:",a),e.a(2,!1);case 6:return e.a(2)}},e,null,[[1,5]])}))).apply(this,arguments)}exports.Controls=F,exports.ControlsMobile=Y,exports.Player=te,exports.PlayerProvider=function(e){var t=e.apiHooks,n=e.playlistActions,a=e.playerActions,o=e.reduxProps,i=m(e,ne);return"undefined"!=typeof window&&(window.__CHEST_PLAYER_DEPS__={apiHooks:t,playlistActions:n,playerActions:a,reduxProps:o}),r.jsx(te,p({},i))},exports.PlayerWithShare=function(e){var t=e.shareTrack,n=void 0===t?null:t,a=e.track,o=void 0===a?null:a,i=e.token,s=void 0===i?null:i,c=e.showSharePage,l=void 0!==c&&c,u=e.showBanner,d=void 0===u||u,m=e.enableSEO,f=void 0===m||m,h=e.baseUrl,x=void 0===h?"":h,g=e.playerProps,y=void 0===g?{}:g,b=e.onTrackLoad,j=void 0===b?null:b,w=e.onPlayTrack,_=void 0===w?null:w,N=v(fe(null),2),k=N[0],P=N[1],C=v(fe(!1),2),S=C[0],E=C[1];he(function(){if(n&&s){var e=se(n,s);P(e),j&&j(e)}else o&&(P(o),j&&j(o))},[n,o,s,j]);var T=pe(k,{enabled:f}),A=me(k,x),R=ve(function(e){E(!0),_&&_(e)},[_]);return k?r.jsxs("div",{className:"chest-player-with-share",children:[l&&r.jsx(ie,{track:k,showBanner:d,showPlayer:S,PlayerComponent:te,playerProps:y,onPlayTrack:R}),r.jsx("div",{className:l&&!S?"hidden":"",children:r.jsx(te,p({},y))}),"development"===process.env.NODE_ENV&&T&&r.jsxs("div",{className:"fixed bottom-4 right-4 bg-black bg-opacity-75 text-white p-4 rounded-lg text-xs max-w-xs z-50",children:[r.jsx("h4",{className:"font-bold mb-2",children:"SEO Debug Info:"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Title:"})," ",T.title]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Share URL:"})," ",null==A?void 0:A.url]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Token:"})," ",k.token]})]})]}):r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-xl font-thunder-bold mb-2",children:"Cargando track..."}),r.jsx("p",{className:"text-neutral-silver-200",children:"Preparando la reproducción"})]})})},exports.ProgressBar=w,exports.ProgressBarMobile=_,exports.SharedLinkBanner=re,exports.SharedLinkPage=ie,exports.Track=Q,exports.TrackMobile=J,exports.VolumeControls=X,exports.canUpdateMetaTags=function(){return"undefined"!=typeof document&&"undefined"!=typeof window},exports.capitalize=function(e){return"string"!=typeof e||0===e.length?"":e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},exports.chestTrackToShareTrack=function(e){return{title:e.title||e.name,authors:e.authors||[],album:e.album||"",version_name:e.version_name||"",cover_url:e.cover_url||e.cover||"https://cdn.chestmusic.com/cover-default.jpg",audio_url:e.audio_url||e.audio||""}},exports.copyToClipboard=function(e){return xe.apply(this,arguments)},exports.generateMetaTagsHTML=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";var r=n.baseUrl,a=void 0===r?"":r,o=n.siteName,i=void 0===o?"Chest Music":o,s=n.description,c=void 0===s?"Chest - El hogar de tus maquetas":s,l=e.title||e.name,u=(null===(t=e.authors)||void 0===t?void 0:t.join(", "))||"",d=e.cover_url||e.cover||"https://cdn.chestmusic.com/cover-default.jpg",p=e.audio_url||e.audio||"",m="".concat(l," - ").concat(u),f=e.token?"".concat(a,"/shared-link/").concat(e.token):"";return["<title>".concat(m,"</title>"),'<meta name="description" content="'.concat(c,'" />'),'<meta name="author" content="'.concat(u,'" />'),'<meta property="og:type" content="music.song" />','<meta property="og:title" content="'.concat(m,'" />'),'<meta property="og:description" content="'.concat(c,'" />'),'<meta property="og:image" content="'.concat(d,'" />'),'<meta property="og:site_name" content="'.concat(i,'" />'),f?'<meta property="og:url" content="'.concat(f,'" />'):"",'<meta property="music:musician" content="'.concat(u,'" />'),e.album?'<meta property="music:album" content="'.concat(e.album,'" />'):"",p?'<meta property="og:audio" content="'.concat(p,'" />'):"",p?'<meta property="og:audio:type" content="audio/mpeg" />':"",'<meta name="twitter:card" content="summary_large_image" />','<meta name="twitter:title" content="'.concat(m,'" />'),'<meta name="twitter:description" content="'.concat(c,'" />'),'<meta name="twitter:image" content="'.concat(d,'" />'),'<meta name="robots" content="index, follow" />','<meta name="viewport" content="width=device-width, initial-scale=1.0" />','<link rel="canonical" href="'.concat(f,'" />')].filter(Boolean).join("\n")},exports.generateMusicStructuredData=function(e){var t;if(!e)return null;var n=e.title||e.name,r=(null===(t=e.authors)||void 0===t?void 0:t.join(", "))||"",a=e.cover_url||e.cover||"https://cdn.chestmusic.com/cover-default.jpg",o=e.audio_url||e.audio||"";return{"@context":"https://schema.org","@type":"MusicRecording",name:n,byArtist:{"@type":"MusicGroup",name:r},inAlbum:e.album?{"@type":"MusicAlbum",name:e.album}:void 0,image:a,audio:o?{"@type":"AudioObject",contentUrl:o,encodingFormat:"audio/mpeg"}:void 0,publisher:{"@type":"Organization",name:"Chest Music",url:"https://chestmusic.com"},potentialAction:{"@type":"ListenAction",target:o}}},exports.generateSEOMetadata=ce,exports.generateSocialMetadata=le,exports.getCurrentShareUrl=function(){return"undefined"==typeof window?"":window.location.href},exports.injectStructuredData=function(e){if("undefined"==typeof document||!e)return function(){};var t=document.createElement("script");t.type="application/ld+json",t.textContent=JSON.stringify(e),t.id="chest-music-structured-data";var n=document.getElementById("chest-music-structured-data");return n&&n.remove(),document.head.appendChild(t),function(){var e=document.getElementById("chest-music-structured-data");e&&e.remove()}},exports.isShareCompatible=function(e){return!(!e.token||!e.audio_url&&!e.audio)},exports.shareTrackToChestTrack=se,exports.useMediaQuery=g,exports.useModal=y,exports.useSEOMetadata=pe,exports.useShareMetadata=me,exports.validateTrackSEO=function(e){var t=[],n=[];return e?(e.name||e.title||t.push("Track name/title is required"),e.authors&&0!==e.authors.length||n.push("Track authors are missing - affects SEO"),e.cover||e.cover_url||n.push("Track cover image is missing - affects social sharing"),e.audio||e.audio_url||t.push("Track audio URL is required"),e.token&&e.token.length<10&&n.push("Share token appears to be too short"),{valid:0===t.length,issues:t,warnings:n,score:Math.max(0,100-25*t.length-10*n.length)}):(t.push("Track data is missing"),{valid:!1,issues:t,warnings:n})};
//# sourceMappingURL=index.js.map
